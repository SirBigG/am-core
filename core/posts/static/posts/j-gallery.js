/*! For license information please see j-gallery.js.LICENSE.txt */
var t={919:function(t){t.exports=function(){var t="webkitTransition"in document.head.style?"webkitTransitionEnd":"transitionend",e="webkitTransition"in document.head.style||"transition"in document.head.style,a="webkitTransition"in document.head.style?"webkitTransitionDuration":"transitionDuration",n="webkitTransition"in document.head.style?"webkitTransitionProperty":"transitionProperty";function i(t){var i=getComputedStyle(t),o=i[n],s=i[a],r=s.includes("ms")?1:1e3,c=e&&o&&"none"!==o?parseFloat(s)*r:0;return Number.isNaN(c)?0:c}function o(e,a){var n=0,o=new Event(t),s=i(e);s?(e.addEventListener(t,(function i(o){o.target===e&&(a.apply(e,[o]),e.removeEventListener(t,i),n=1)})),setTimeout((function(){n||e.dispatchEvent(o)}),s+17)):a.apply(e,[o])}function s(t,e){var a=e&&e instanceof Element?e:document;return t instanceof Element?t:a.querySelector(t)}function r(t,e,a){var n=new CustomEvent(t+".bs."+e,{cancelable:!0});return void 0!==a&&Object.keys(a).forEach((function(t){Object.defineProperty(n,t,{value:a[t]})})),n}function c(t){this&&this.dispatchEvent(t)}function l(t){var e,a,n=this,i=r("close","alert"),l=r("closed","alert");function d(){a.classList.contains("fade")?o(a,f):f()}function u(t){e[t?"addEventListener":"removeEventListener"]("click",h,!1)}function h(t){a=t&&t.target.closest(".alert"),(e=s('[data-dismiss="alert"]',a))&&a&&(e===t.target||e.contains(t.target))&&n.close()}function f(){u(),a.parentNode.removeChild(a),c.call(a,l)}n.close=function(){if(a&&e&&a.classList.contains("show")){if(c.call(a,i),i.defaultPrevented)return;n.dispose(),a.classList.remove("show"),d()}},n.dispose=function(){u(),delete e.Alert},e=s(t),a=e.closest(".alert"),e.Alert&&e.Alert.dispose(),e.Alert||u(1),n.element=e,e.Alert=n}function d(t){var e,a,n=this,i=r("change","button");function o(t){var n=t.target,o=n.closest("LABEL"),s=null;"LABEL"===n.tagName?s=n:o&&(s=o);var r=s&&s.getElementsByTagName("INPUT")[0];if(r){if(c.call(r,i),c.call(e,i),"checkbox"===r.type){if(i.defaultPrevented)return;r.checked?(s.classList.remove("active"),r.getAttribute("checked"),r.removeAttribute("checked"),r.checked=!1):(s.classList.add("active"),r.getAttribute("checked"),r.setAttribute("checked","checked"),r.checked=!0),e.toggled||(e.toggled=!0)}if("radio"===r.type&&!e.toggled){if(i.defaultPrevented)return;(!r.checked||0===t.screenX&&0===t.screenY)&&(s.classList.add("active"),s.classList.add("focus"),r.setAttribute("checked","checked"),r.checked=!0,e.toggled=!0,Array.from(a).forEach((function(t){var e=t.getElementsByTagName("INPUT")[0];t!==s&&t.classList.contains("active")&&(c.call(e,i),t.classList.remove("active"),e.removeAttribute("checked"),e.checked=!1)})))}setTimeout((function(){e.toggled=!1}),50)}}function l(t){32===(t.which||t.keyCode)&&t.target===document.activeElement&&o(t)}function d(t){32===(t.which||t.keyCode)&&t.preventDefault()}function u(t){if("INPUT"===t.target.tagName){var e="focusin"===t.type?"add":"remove";t.target.closest(".btn").classList[e]("focus")}}function h(t){var a=t?"addEventListener":"removeEventListener";e[a]("click",o,!1),e[a]("keyup",l,!1),e[a]("keydown",d,!1),e[a]("focusin",u,!1),e[a]("focusout",u,!1)}n.dispose=function(){h(),delete e.Button},(e=s(t)).Button&&e.Button.dispose(),(a=e.getElementsByClassName("btn")).length&&(e.Button||h(1),e.toggled=!1,e.Button=n,Array.from(a).forEach((function(t){var e=s("input:checked",t);!t.classList.contains("active")&&e&&t.classList.add("active"),t.classList.contains("active")&&!e&&t.classList.remove("active")})))}var u="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],h="addEventListener",f="removeEventListener",m=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){return t=!0}});document[h]("DOMContentLoaded",(function t(){document[f]("DOMContentLoaded",t,e)}),e)}catch(t){throw Error("Passive events are not supported")}return t}()&&{passive:!0};function p(t){var e=t.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight;return e.top<=a&&e.bottom>=0}function v(t){return t.offsetHeight}function g(t,e){var a,n,l,d,h,f,g,y,w,x,b,E,P,L=e||{},A=this;function N(){!1===f.interval||d.classList.contains("paused")||(d.classList.add("paused"),h.isSliding||(clearInterval(h.timer),h.timer=null))}function T(){!1!==f.interval&&d.classList.contains("paused")&&(d.classList.remove("paused"),h.isSliding||(clearInterval(h.timer),h.timer=null,A.cycle()))}function I(t){if(t.preventDefault(),!h.isSliding){var e=t.target;e&&!e.classList.contains("active")&&e.getAttribute("data-slide-to")&&(h.index=+e.getAttribute("data-slide-to"),A.slideTo(h.index))}}function k(t){if(t.preventDefault(),!h.isSliding){var e=t.currentTarget||t.srcElement;e===b?h.index+=1:e===x&&(h.index-=1),A.slideTo(h.index)}}function _(t){var e=t.which;if(!h.isSliding){switch(e){case 39:h.index+=1;break;case 37:h.index-=1;break;default:return}A.slideTo(h.index)}}function S(t){var e=t?"addEventListener":"removeEventListener";f.pause&&f.interval&&(d[e](u[0],N,!1),d[e](u[1],T,!1),d[e]("touchstart",N,m),d[e]("touchend",T,m)),f.touch&&w.length>1&&d[e]("touchstart",B,m),b&&b[e]("click",k,!1),x&&x[e]("click",k,!1),E&&E[e]("click",I,!1),f.keyboard&&window[e]("keydown",_,!1)}function C(t){var e=t?"addEventListener":"removeEventListener";d[e]("touchmove",D,m),d[e]("touchend",O,m)}function B(t){h.isTouch||(h.touchPosition.startX=t.changedTouches[0].pageX,d.contains(t.target)&&(h.isTouch=!0,C(1)))}function D(t){h.isTouch?(h.touchPosition.currentX=t.changedTouches[0].pageX,"touchmove"===t.type&&t.changedTouches.length>1&&t.preventDefault()):t.preventDefault()}function O(t){if(h.isTouch&&!h.isSliding&&(h.touchPosition.endX=h.touchPosition.currentX||t.changedTouches[0].pageX,h.isTouch)){if((!d.contains(t.target)||!d.contains(t.relatedTarget))&&Math.abs(h.touchPosition.startX-h.touchPosition.endX)<75)return;h.touchPosition.currentX<h.touchPosition.startX?h.index+=1:h.touchPosition.currentX>h.touchPosition.startX&&(h.index-=1),h.isTouch=!1,A.slideTo(h.index),C()}}function H(t){Array.from(P).forEach((function(t){return t.classList.remove("active")})),P[t]&&P[t].classList.add("active")}function M(t){if(h.touchPosition){var e=h.index,a=t&&t.target!==w[e]?1e3*t.elapsedTime+100:20,n=A.getActiveIndex(),i="left"===h.direction?"next":"prev";h.isSliding&&setTimeout((function(){h.touchPosition&&(h.isSliding=!1,w[e].classList.add("active"),w[n].classList.remove("active"),w[e].classList.remove("carousel-item-"+i),w[e].classList.remove("carousel-item-"+h.direction),w[n].classList.remove("carousel-item-"+h.direction),c.call(d,y),document.hidden||!f.interval||d.classList.contains("paused")||A.cycle())}),a)}}if(A.cycle=function(){h.timer&&(clearInterval(h.timer),h.timer=null),h.timer=setInterval((function(){var t=h.index||A.getActiveIndex();p(d)&&(t+=1,A.slideTo(t))}),f.interval)},A.slideTo=function(t){if(!h.isSliding){var e=A.getActiveIndex(),a=t;if(e!==a){e<a||0===e&&a===w.length-1?h.direction="left":(e>a||e===w.length-1&&0===a)&&(h.direction="right"),a<0?a=w.length-1:a>=w.length&&(a=0);var n="left"===h.direction?"next":"prev",s={relatedTarget:w[a],direction:h.direction,from:e,to:a};g=r("slide","carousel",s),y=r("slid","carousel",s),c.call(d,g),g.defaultPrevented||(h.index=a,h.isSliding=!0,clearInterval(h.timer),h.timer=null,H(a),i(w[a])&&d.classList.contains("slide")?(w[a].classList.add("carousel-item-"+n),v(w[a]),w[a].classList.add("carousel-item-"+h.direction),w[e].classList.add("carousel-item-"+h.direction),o(w[a],M)):(w[a].classList.add("active"),v(w[a]),w[e].classList.remove("active"),setTimeout((function(){h.isSliding=!1,f.interval&&d&&!d.classList.contains("paused")&&A.cycle(),c.call(d,y)}),100)))}}},A.getActiveIndex=function(){return Array.from(w).indexOf(d.getElementsByClassName("carousel-item active")[0])||0},A.dispose=function(){var t=["left","right","prev","next"];Array.from(w).forEach((function(e,a){e.classList.contains("active")&&H(a),t.forEach((function(t){return e.classList.remove("carousel-item-"+t)}))})),clearInterval(h.timer),S(),h={},f={},delete d.Carousel},(d=s(t)).Carousel&&d.Carousel.dispose(),w=d.getElementsByClassName("carousel-item"),a=d.getElementsByClassName("carousel-control-prev"),x=a[0],n=d.getElementsByClassName("carousel-control-next"),b=n[0],l=d.getElementsByClassName("carousel-indicators"),E=l[0],P=E&&E.getElementsByTagName("LI")||[],!(w.length<2)){var X=d.getAttribute("data-interval"),G="false"===X?0:+X,z="false"===d.getAttribute("data-touch")?0:1,U="hover"===d.getAttribute("data-pause")||!1,Y="true"===d.getAttribute("data-keyboard")||!1,j=L.interval,W=L.touch;(f={}).keyboard=!0===L.keyboard||Y,f.pause=!("hover"!==L.pause&&!U)&&"hover",f.touch=W||z,f.interval=5e3,"number"==typeof j?f.interval=j:!1===j||0===G||!1===G?f.interval=0:Number.isNaN(G)||(f.interval=G),A.getActiveIndex()<0&&(w.length&&w[0].classList.add("active"),P.length&&H(0)),(h={}).direction="left",h.index=0,h.timer=null,h.isSliding=!1,h.isTouch=!1,h.touchPosition={startX:0,currentX:0,endX:0},S(1),f.interval&&A.cycle(),d.Carousel=A}}function y(t,e){var a,n,i,l,d,u,h,f=e||{},m=this,p=null,g=null;function y(t,e){c.call(t,l),l.defaultPrevented||(t.isAnimating=!0,t.classList.add("collapsing"),t.classList.remove("collapse"),t.style.height=t.scrollHeight+"px",o(t,(function(){t.isAnimating=!1,t.setAttribute("aria-expanded","true"),e.setAttribute("aria-expanded","true"),t.classList.remove("collapsing"),t.classList.add("collapse"),t.classList.add("show"),t.style.height="",c.call(t,d)})))}function w(t,e){c.call(t,u),u.defaultPrevented||(t.isAnimating=!0,t.style.height=t.scrollHeight+"px",t.classList.remove("collapse"),t.classList.remove("show"),t.classList.add("collapsing"),v(t),t.style.height="0px",o(t,(function(){t.isAnimating=!1,t.setAttribute("aria-expanded","false"),e.setAttribute("aria-expanded","false"),t.classList.remove("collapsing"),t.classList.add("collapse"),t.style.height="",c.call(t,h)})))}m.toggle=function(t){(t&&"A"===t.target.tagName||"A"===a.tagName)&&t.preventDefault(),(a.contains(t.target)||t.target===a)&&(g.classList.contains("show")?m.hide():m.show())},m.hide=function(){g.isAnimating||(w(g,a),a.classList.add("collapsed"))},m.show=function(){var t;p&&(t=p.getElementsByClassName("collapse show"),n=t[0],i=n&&(s('[data-target="#'+n.id+'"]',p)||s('[href="#'+n.id+'"]',p))),g.isAnimating||(i&&n!==g&&(w(n,i),i.classList.add("collapsed")),y(g,a),a.classList.remove("collapsed"))},m.dispose=function(){a.removeEventListener("click",m.toggle,!1),delete a.Collapse},(a=s(t)).Collapse&&a.Collapse.dispose();var x=a.getAttribute("data-parent");l=r("show","collapse"),d=r("shown","collapse"),u=r("hide","collapse"),h=r("hidden","collapse"),null!==(g=s(f.target||a.getAttribute("data-target")||a.getAttribute("href")))&&(g.isAnimating=!1),p=a.closest(f.parent||x),a.Collapse||a.addEventListener("click",m.toggle,!1),a.Collapse=m}function w(t){t.focus()}function x(t,e){var a,n,i,o,l,d,u,h,f=this,m=null,p=[];function v(t){(t.href&&"#"===t.href.slice(-1)||t.parentNode&&t.parentNode.href&&"#"===t.parentNode.href.slice(-1))&&this.preventDefault()}function g(){var t=a.open?"addEventListener":"removeEventListener";document[t]("click",y,!1),document[t]("keydown",b,!1),document[t]("keyup",E,!1),document[t]("focus",y,!1)}function y(t){var e=t.target;if(e.getAttribute){var n=e&&e.getAttribute("data-toggle")||e.parentNode&&e.parentNode.getAttribute&&e.parentNode.getAttribute("data-toggle");("focus"!==t.type||e!==a&&e!==u&&!u.contains(e))&&(e!==u&&!u.contains(e)||!h&&!n)&&(m=e===a||a.contains(e)?a:null,f.hide(),v.call(t,e))}}function x(t){m=a,f.show(),v.call(t,t.target)}function b(t){var e=t.which||t.keyCode;38!==e&&40!==e||t.preventDefault()}function E(t){var e=t.which||t.keyCode,n=document.activeElement,i=n===a,o=u.contains(n),s=n.parentNode===u||n.parentNode.parentNode===u,r=p.indexOf(n);s&&(i?r=0:38===e?r=r>1?r-1:0:40===e&&(r=r<p.length-1?r+1:r),p[r]&&w(p[r])),(p.length&&s||!p.length&&(o||i)||!o)&&a.open&&27===e&&(f.toggle(),m=null)}f.show=function(){n=r("show","dropdown",{relatedTarget:m}),c.call(d,n),n.defaultPrevented||(u.classList.add("show"),d.classList.add("show"),a.setAttribute("aria-expanded",!0),a.open=!0,a.removeEventListener("click",x,!1),setTimeout((function(){w(u.getElementsByTagName("INPUT")[0]||a),g(),i=r("shown","dropdown",{relatedTarget:m}),c.call(d,i)}),1))},f.hide=function(){o=r("hide","dropdown",{relatedTarget:m}),c.call(d,o),o.defaultPrevented||(u.classList.remove("show"),d.classList.remove("show"),a.setAttribute("aria-expanded",!1),a.open=!1,g(),w(a),setTimeout((function(){a.Dropdown&&a.addEventListener("click",x,!1)}),1),l=r("hidden","dropdown",{relatedTarget:m}),c.call(d,l))},f.toggle=function(){d.classList.contains("show")&&a.open?f.hide():f.show()},f.dispose=function(){d.classList.contains("show")&&a.open&&f.hide(),a.removeEventListener("click",x,!1),delete a.Dropdown},(a=s(t)).Dropdown&&a.Dropdown.dispose(),d=a.parentNode,u=s(".dropdown-menu",d),Array.from(u.children).forEach((function(t){t.children.length&&"A"===t.children[0].tagName&&p.push(t.children[0]),"A"===t.tagName&&p.push(t)})),a.Dropdown||("tabindex"in u||u.setAttribute("tabindex","0"),a.addEventListener("click",x,!1)),h=!0===e||"true"===a.getAttribute("data-persist")||!1,a.open=!1,a.Dropdown=f}function b(t,e){var a,n,l,d,u,h,f,p,g,y,x=e||{},b=this,E=null,P={};function L(){var t=document.body.classList.contains("modal-open"),e=parseInt(getComputedStyle(document.body).paddingRight,10),a=document.documentElement.clientHeight,i=document.documentElement.scrollHeight,o=document.body.clientHeight,s=document.body.scrollHeight,r=a!==i||o!==s,c=n.clientHeight!==n.scrollHeight;f=N(),n.style.paddingRight=!c&&f?f+"px":"",document.body.style.paddingRight=c||r?e+(t?0:f)+"px":"",y.length&&y.forEach((function(e){var a=getComputedStyle(e).paddingRight;e.style.paddingRight=c||r?parseInt(a,10)+(t?0:f)+"px":parseInt(a,10)+"px"}))}function A(){document.body.style.paddingRight="",n.style.paddingRight="",y.length&&y.forEach((function(t){t.style.paddingRight=""}))}function N(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function T(){var t=document.createElement("div");return null===(p=s(".modal-backdrop"))&&(t.setAttribute("class","modal-backdrop"+(P.animation?" fade":"")),p=t,document.body.appendChild(p)),p}function I(){(p=s(".modal-backdrop"))&&!document.getElementsByClassName("modal show")[0]&&(document.body.removeChild(p),p=null),null===p&&(document.body.classList.remove("modal-open"),A())}function k(t){var e=t?"addEventListener":"removeEventListener";window[e]("resize",b.update,m),n[e]("click",O,!1),document[e]("keydown",D,!1)}function _(){n.style.display="block",L(),document.getElementsByClassName("modal show")[0]||document.body.classList.add("modal-open"),n.classList.add("show"),n.setAttribute("aria-hidden",!1),n.classList.contains("fade")?o(n,S):S()}function S(){w(n),n.isAnimating=!1,k(1),d=r("shown","modal",{relatedTarget:E}),c.call(n,d)}function C(t){n.style.display="",a&&w(a),p=s(".modal-backdrop"),1!==t&&p&&p.classList.contains("show")&&!document.getElementsByClassName("modal show")[0]?(p.classList.remove("show"),o(p,I)):I(),k(),n.isAnimating=!1,h=r("hidden","modal"),c.call(n,h)}function B(t){if(!n.isAnimating){var e=t.target,i="#"+n.getAttribute("id"),o=e.getAttribute("data-target")||e.getAttribute("href"),s=a.getAttribute("data-target")||a.getAttribute("href");!n.classList.contains("show")&&(e===a&&o===i||a.contains(e)&&s===i)&&(n.modalTrigger=a,E=a,b.show(),t.preventDefault())}}function D(t){var e=t.which;!n.isAnimating&&P.keyboard&&27===e&&n.classList.contains("show")&&b.hide()}function O(t){if(!n.isAnimating){var e=t.target,a="modal"===e.getAttribute("data-dismiss"),i=e.closest('[data-dismiss="modal"]');n.classList.contains("show")&&(i||a||e===n&&"static"!==P.backdrop)&&(b.hide(),E=null,t.preventDefault())}}b.toggle=function(){n.classList.contains("show")?b.hide():b.show()},b.show=function(){if(!(n.classList.contains("show")&&n.isAnimating||(l=r("show","modal",{relatedTarget:E}),c.call(n,l),l.defaultPrevented))){n.isAnimating=!0;var t=document.getElementsByClassName("modal show")[0];t&&t!==n&&(t.modalTrigger&&t.modalTrigger.Modal.hide(),t.Modal&&t.Modal.hide()),P.backdrop&&(p=T()),!p||t||p.classList.contains("show")||(v(p),g=i(p),p.classList.add("show")),t?_():setTimeout(_,p&&g?g:0)}},b.hide=function(t){n.classList.contains("show")&&(u=r("hide","modal"),c.call(n,u),u.defaultPrevented||(n.isAnimating=!0,n.classList.remove("show"),n.setAttribute("aria-hidden",!0),n.classList.contains("fade")&&1!==t?o(n,C):C()))},b.setContent=function(t){s(".modal-content",n).innerHTML=t},b.update=function(){n.classList.contains("show")&&L()},b.dispose=function(){b.hide(1),a?(a.removeEventListener("click",B,!1),delete a.Modal):delete n.Modal},a=s(t);var H=s(a.getAttribute("data-target")||a.getAttribute("href"));n=a.classList.contains("modal")?a:H,y=Array.from(document.getElementsByClassName("fixed-top")).concat(Array.from(document.getElementsByClassName("fixed-bottom"))),a.classList.contains("modal")&&(a=null),a&&a.Modal&&a.Modal.dispose(),n&&n.Modal&&n.Modal.dispose(),P.keyboard=!(!1===x.keyboard||"false"===n.getAttribute("data-keyboard")),P.backdrop="static"!==x.backdrop&&"static"!==n.getAttribute("data-backdrop")||"static",P.backdrop=!1!==x.backdrop&&"false"!==n.getAttribute("data-backdrop")&&P.backdrop,P.animation=!!n.classList.contains("fade"),P.content=x.content,n.isAnimating=!1,a&&!a.Modal&&a.addEventListener("click",B,!1),P.content&&b.setContent(P.content.trim()),a?(n.modalTrigger=a,a.Modal=b):n.Modal=b}var E={down:"mousedown",up:"mouseup"};function P(){return{y:window.pageYOffset||document.documentElement.scrollTop,x:window.pageXOffset||document.documentElement.scrollLeft}}function L(t,e,a,n){var i,o,s,r,c=/\b(top|bottom|left|right)+/,l={w:e.offsetWidth,h:e.offsetHeight},d=document.documentElement.clientWidth||document.body.clientWidth,u=document.documentElement.clientHeight||document.body.clientHeight,h=t.getBoundingClientRect(),f=n===document.body?P():{x:n.offsetLeft+n.scrollLeft,y:n.offsetTop+n.scrollTop},m={w:h.right-h.left,h:h.bottom-h.top},p=e.classList.contains("popover"),v=e.getElementsByClassName("arrow")[0],g=h.top+m.h/2-l.h/2<0,y=h.left+m.w/2-l.w/2<0,w=h.left+l.w/2+m.w/2>=d,x=h.top+l.h/2+m.h/2>=u,b=h.top-l.h<0,E=h.left-l.w<0,L=h.top+l.h+m.h>=u,A=h.left+l.w+m.w>=d,N=a;N="right"===(N="left"===(N="bottom"===(N="top"===(N=("left"===N||"right"===N)&&E&&A?"top":N)&&b?"bottom":N)&&L?"top":N)&&E?"right":N)&&A?"left":N,-1===e.className.indexOf(N)&&(e.className=e.className.replace(c,N));var T=v.offsetWidth,I=v.offsetHeight;"left"===N||"right"===N?(o="left"===N?h.left+f.x-l.w-(p?T:0):h.left+f.x+m.w,g?(i=h.top+f.y,s=m.h/2-T):x?(i=h.top+f.y-l.h+m.h,s=l.h-m.h/2-T):(i=h.top+f.y-l.h/2+m.h/2,s=l.h/2-(p?.9*I:I/2))):"top"!==N&&"bottom"!==N||(i="top"===N?h.top+f.y-l.h-(p?I:0):h.top+f.y+m.h,y?(o=0,r=h.left+m.w/2-T):w?(o=d-1.01*l.w,r=l.w-(d-h.left)+m.w/2-T/2):(o=h.left+f.x-l.w/2+m.w/2,r=l.w/2-(p?T:T/2))),e.style.top=i+"px",e.style.left=o+"px",s&&(v.style.top=s+"px"),r&&(v.style.left=r+"px")}function A(t,e){var a,n,i,l,d,h,f,p,v,g,y=e||{},w=this,x=null,b=0,P=/(iPhone|iPod|iPad)/.test(navigator.userAgent),A={};function N(t){null!==x&&t.target===s(".close",x)&&w.hide()}function T(){return{0:y.title||n.getAttribute("data-title")||null,1:y.content||n.getAttribute("data-content")||null}}function I(){A.container.removeChild(x),b=null,x=null}function k(){var t;t=T(),i=t[0],l=(l=t[1])?l.trim():null,x=document.createElement("div");var e=document.createElement("div");if(e.classList.add("arrow"),x.appendChild(e),null!==l&&null===A.template){if(x.setAttribute("role","tooltip"),null!==i){var a=document.createElement("h3");a.classList.add("popover-header"),a.innerHTML=A.dismissible?i+h:i,x.appendChild(a)}var n=document.createElement("div");n.classList.add("popover-body"),n.innerHTML=A.dismissible&&null===i?l+h:l,x.appendChild(n)}else{var o=document.createElement("div");o.innerHTML=A.template.trim(),x.className=o.firstChild.className,x.innerHTML=o.firstChild.innerHTML;var r=s(".popover-header",x),c=s(".popover-body",x);i&&r&&(r.innerHTML=i.trim()),l&&c&&(c.innerHTML=l.trim())}A.container.appendChild(x),x.style.display="block",x.classList.contains("popover")||x.classList.add("popover"),x.classList.contains(A.animation)||x.classList.add(A.animation),x.classList.contains(d)||x.classList.add(d)}function _(){x.classList.contains("show")||x.classList.add("show")}function S(){L(n,x,A.placement,A.container)}function C(){null===x&&n.focus()}function B(t){var e=t?"addEventListener":"removeEventListener";"hover"===A.trigger?(n[e](E.down,w.show),n[e](u[0],w.show),A.dismissible||n[e](u[1],w.hide)):"click"===A.trigger?n[e](A.trigger,w.toggle):"focus"===A.trigger&&(P&&n[e]("click",C,!1),n[e](A.trigger,w.toggle))}function D(t){x&&x.contains(t.target)||t.target===n||n.contains(t.target)||w.hide()}function O(t){var e=t?"addEventListener":"removeEventListener";A.dismissible?document[e]("click",N,!1):("focus"===A.trigger&&n[e]("blur",w.hide),"hover"===A.trigger&&document[e]("touchstart",D,m)),window[e]("resize",w.hide,m)}function H(){O(1),c.call(n,p)}function M(){O(),I(),c.call(n,g)}w.toggle=function(){null===x?w.show():w.hide()},w.show=function(){clearTimeout(b),b=setTimeout((function(){if(null===x){if(c.call(n,f),f.defaultPrevented)return;k(),S(),_(),A.animation?o(x,H):H()}}),20)},w.hide=function(){clearTimeout(b),b=setTimeout((function(){if(x&&null!==x&&x.classList.contains("show")){if(c.call(n,v),v.defaultPrevented)return;x.classList.remove("show"),A.animation?o(x,M):M()}}),A.delay)},w.dispose=function(){w.hide(),B(),delete n.Popover},(n=s(t)).Popover&&n.Popover.dispose();var X=n.getAttribute("data-trigger"),G=n.getAttribute("data-animation"),z=n.getAttribute("data-placement"),U=n.getAttribute("data-dismissible"),Y=n.getAttribute("data-delay"),j=n.getAttribute("data-container");h='<button type="button" class="close">×</button>',f=r("show","popover"),p=r("shown","popover"),v=r("hide","popover"),g=r("hidden","popover");var W=s(y.container),R=s(j),q=n.closest(".modal"),F=n.closest(".fixed-top"),V=n.closest(".fixed-bottom");A.template=y.template?y.template:null,A.trigger=y.trigger?y.trigger:X||"hover",A.animation=y.animation&&"fade"!==y.animation?y.animation:G||"fade",A.placement=y.placement?y.placement:z||"top",A.delay=parseInt(y.delay||Y,10)||200,A.dismissible=!(!y.dismissible&&"true"!==U),A.container=W||R||F||V||q||document.body,d="bs-popover-"+A.placement,a=T(),i=a[0],((l=a[1])||A.template)&&(n.Popover||B(1),n.Popover=w)}function N(t,e){var a,n,i,o,l,d=e||{},u=this,h={};function f(){var t,e,r;i=o.getElementsByTagName("A"),n.scrollTop=n.isWindow?P().y:a.scrollTop,(n.length!==i.length||v()!==n.scrollHeight)&&(n.items=[],n.offsets=[],n.scrollHeight=v(),n.maxScroll=n.scrollHeight-g(),Array.from(i).forEach((function(a){t=a.getAttribute("href"),(e=t&&"#"===t.charAt(0)&&"#"!==t.slice(-1)&&s(t))&&(n.items.push(a),r=e.getBoundingClientRect(),n.offsets.push((n.isWindow?r.top+n.scrollTop:e.offsetTop)-h.offset))})),n.length=n.items.length)}function p(t){var e=t?"addEventListener":"removeEventListener";l[e]("scroll",u.refresh,m),window[e]("resize",u.refresh,m)}function v(){return l.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}function g(){return n.isWindow?window.innerHeight:a.getBoundingClientRect().height}function y(){Array.from(i).map((function(t){return t.classList.contains("active")&&t.classList.remove("active")}))}function w(t){var e,i=t;y(),n.activeItem=i,i.classList.add("active");for(var o=[];i.parentNode!==document.body;)((e=(i=i.parentNode).classList).contains("dropdown-menu")||e.contains("nav"))&&o.push(i);o.forEach((function(t){var e=t.previousElementSibling;e&&!e.classList.contains("active")&&e.classList.add("active")})),c.call(a,r("activate","scrollspy",{relatedTarget:n.activeItem}))}u.refresh=function(){if(f(),n.scrollTop>=n.maxScroll){var t=n.items[n.length-1];n.activeItem!==t&&w(t)}else{if(n.activeItem&&n.scrollTop<n.offsets[0]&&n.offsets[0]>0)return n.activeItem=null,void y();for(var e=n.length;e>-1;)n.activeItem!==n.items[e]&&n.scrollTop>=n.offsets[e]&&(void 0===n.offsets[e+1]||n.scrollTop<n.offsets[e+1])&&w(n.items[e]),e-=1}},u.dispose=function(){p(),delete a.ScrollSpy},(a=s(t)).ScrollSpy&&a.ScrollSpy.dispose();var x=a.getAttribute("data-target"),b=a.getAttribute("data-offset");o=s(d.target||x),l=a.clientHeight<a.scrollHeight?a:window,o&&(h.offset=+(d.offset||b)||10,(n={}).length=0,n.items=[],n.offsets=[],n.isWindow=l===window,n.activeItem=null,n.scrollHeight=0,n.maxScroll=0,a.ScrollSpy||p(1),u.refresh(),a.ScrollSpy=u)}function T(t,a){var n,i,l,d,u,h,f,m,p,g,y,w,x,b,E=a||{},P=this,L=!1;function A(){L.style.height="",L.classList.remove("collapsing"),i.isAnimating=!1}function N(){L?x?A():setTimeout((function(){L.style.height=b+"px",v(L),o(L,A)}),50):i.isAnimating=!1,u=r("shown","tab",{relatedTarget:p}),c.call(m,u)}function T(){L&&(g.style.float="left",y.style.float="left",w=g.scrollHeight),d=r("show","tab",{relatedTarget:p}),f=r("hidden","tab",{relatedTarget:m}),c.call(m,d),d.defaultPrevented||(y.classList.add("active"),g.classList.remove("active"),L&&(b=y.scrollHeight,x=b===w,L.classList.add("collapsing"),L.style.height=w+"px",v(L),g.style.float="",y.style.float=""),y.classList.contains("fade")?setTimeout((function(){y.classList.add("show"),o(y,N)}),20):N(),c.call(p,f))}function I(){var t=i.getElementsByClassName("active");return 1!==t.length||t[0].parentNode.classList.contains("dropdown")?t.length>1&&(p=t[t.length-1]):p=t[0],p}function k(){return s(I().getAttribute("href"))}function _(t){t.preventDefault(),m=t.currentTarget,i.isAnimating||P.show()}P.show=function(){if(!(m=m||n).classList.contains("active")){if(y=s(m.getAttribute("href")),p=I(),g=k(),h=r("hide","tab",{relatedTarget:m}),c.call(p,h),h.defaultPrevented)return;i.isAnimating=!0,p.classList.remove("active"),p.setAttribute("aria-selected","false"),m.classList.add("active"),m.setAttribute("aria-selected","true"),l&&(n.parentNode.classList.contains("dropdown-menu")?l.classList.contains("active")||l.classList.add("active"):l.classList.contains("active")&&l.classList.remove("active")),g.classList.contains("fade")?(g.classList.remove("show"),o(g,T)):T()}},P.dispose=function(){n.removeEventListener("click",_,!1),delete n.Tab},(n=s(t)).Tab&&n.Tab.dispose();var S=n.getAttribute("data-height");i=n.closest(".nav"),l=i&&s(".dropdown-toggle",i);var C=!(!e||!1===E.height||"false"===S);i.isAnimating=!1,n.Tab||n.addEventListener("click",_,!1),C&&(L=k().parentNode),n.Tab=P}function I(t,e){var a,n,i,l,d,u,h=e||{},f=this,m=0,p={};function g(){n.classList.remove("showing"),n.classList.add("show"),c.call(n,d),p.autohide&&f.hide()}function y(){n.classList.add("hide"),c.call(n,u)}function w(){n.classList.remove("show"),p.animation?o(n,y):y()}function x(){clearTimeout(m),a.removeEventListener("click",f.hide,!1),delete a.Toast}f.show=function(){if(n&&!n.classList.contains("show")){if(c.call(n,i),i.defaultPrevented)return;p.animation&&n.classList.add("fade"),n.classList.remove("hide"),v(n),n.classList.add("showing"),p.animation?o(n,g):g()}},f.hide=function(t){if(n&&n.classList.contains("show")){if(c.call(n,l),l.defaultPrevented)return;t?w():m=setTimeout(w,p.delay)}},f.dispose=function(){p.animation?o(n,x):x()},(a=s(t)).Toast&&a.Toast.dispose(),n=a.closest(".toast");var b=a.getAttribute("data-animation"),E=a.getAttribute("data-autohide"),P=a.getAttribute("data-delay");i=r("show","toast"),l=r("hide","toast"),d=r("shown","toast"),u=r("hidden","toast"),p.animation=!1===h.animation||"false"===b?0:1,p.autohide=!1===h.autohide||"false"===E?0:1,p.delay=parseInt(h.delay||P,10)||500,a.Toast||a.addEventListener("click",f.hide,!1),a.Toast=f}function k(t,e){var a,n,i,l,d,h,f,p=e||{},v=this,g=null,y=0,w={};function x(){return a.getAttribute("title")||a.getAttribute("data-title")||a.getAttribute("data-original-title")}function b(){w.container.removeChild(g),g=null,y=null}function P(){if(n=x()){if(g=document.createElement("div"),w.template){var t=document.createElement("div");t.innerHTML=w.template.trim(),g.className=t.firstChild.className,g.innerHTML=t.firstChild.innerHTML,s(".tooltip-inner",g).innerHTML=n.trim()}else{var e=document.createElement("div");e.classList.add("arrow"),g.appendChild(e);var a=document.createElement("div");a.classList.add("tooltip-inner"),g.appendChild(a),a.innerHTML=n}g.style.left="0",g.style.top="0",g.setAttribute("role","tooltip"),g.classList.contains("tooltip")||g.classList.add("tooltip"),g.classList.contains(w.animation)||g.classList.add(w.animation),g.classList.contains(i)||g.classList.add(i),w.container.appendChild(g)}}function A(){L(a,g,w.placement,w.container)}function N(){g.classList.contains("show")||g.classList.add("show")}function T(t){g&&g.contains(t.target)||t.target===a||a.contains(t.target)||v.hide()}function I(t){var e=t?"addEventListener":"removeEventListener";document[e]("touchstart",T,m),window[e]("resize",v.hide,m)}function k(){I(1),c.call(a,d)}function _(){I(),b(),c.call(a,f)}function S(t){var e=t?"addEventListener":"removeEventListener";a[e](E.down,v.show,!1),a[e](u[0],v.show,!1),a[e](u[1],v.hide,!1)}v.show=function(){clearTimeout(y),y=setTimeout((function(){if(null===g){if(c.call(a,l),l.defaultPrevented)return;!1!==P()&&(A(),N(),w.animation?o(g,k):k())}}),20)},v.hide=function(){clearTimeout(y),y=setTimeout((function(){if(g&&g.classList.contains("show")){if(c.call(a,h),h.defaultPrevented)return;g.classList.remove("show"),w.animation?o(g,_):_()}}),w.delay)},v.toggle=function(){g?v.hide():v.show()},v.dispose=function(){S(),v.hide(),a.setAttribute("title",a.getAttribute("data-original-title")),a.removeAttribute("data-original-title"),delete a.Tooltip},(a=s(t)).Tooltip&&a.Tooltip.dispose();var C=a.getAttribute("data-animation"),B=a.getAttribute("data-placement"),D=a.getAttribute("data-delay"),O=a.getAttribute("data-container"),H=s(p.container),M=s(O),X=a.closest(".modal");l=r("show","tooltip"),d=r("shown","tooltip"),h=r("hide","tooltip"),f=r("hidden","tooltip");var G=a.closest(".fixed-top"),z=a.closest(".fixed-bottom");w.animation=p.animation&&"fade"!==p.animation?p.animation:C||"fade",w.placement=p.placement?p.placement:B||"top",w.template=p.template?p.template:null,w.delay=parseInt(p.delay||D,10)||200,w.container=H||M||G||z||X||document.body,i="bs-tooltip-"+w.placement,(n=x())&&(a.Tooltip||(a.setAttribute("data-original-title",n),a.removeAttribute("title"),S(1)),a.Tooltip=v)}var _={};function S(t,e){Array.from(e).map((function(e){return new t(e)}))}function C(t){var e=t instanceof Element?t:document;Object.keys(_).forEach((function(t){S(_[t][0],e.querySelectorAll(_[t][1]))}))}function B(t,e){Array.from(e).map((function(e){return e[t].dispose()}))}function D(t){var e=t instanceof Element?t:document;Object.keys(_).forEach((function(t){B(t,e.querySelectorAll(_[t][1]))}))}return _.Alert=[l,'[data-dismiss="alert"]'],_.Button=[d,'[data-toggle="buttons"]'],_.Carousel=[g,'[data-ride="carousel"]'],_.Collapse=[y,'[data-toggle="collapse"]'],_.Dropdown=[x,'[data-toggle="dropdown"]'],_.Modal=[b,'[data-toggle="modal"]'],_.Popover=[A,'[data-toggle="popover"],[data-tip="popover"]'],_.ScrollSpy=[N,'[data-spy="scroll"]'],_.Tab=[T,'[data-toggle="tab"]'],_.Toast=[I,'[data-dismiss="toast"]'],_.Tooltip=[k,'[data-toggle="tooltip"],[data-tip="tooltip"]'],document.body?C():document.addEventListener("DOMContentLoaded",(function t(){C(),document.removeEventListener("DOMContentLoaded",t,!1)}),!1),{Alert:l,Button:d,Carousel:g,Collapse:y,Dropdown:x,Modal:b,Popover:A,ScrollSpy:N,Tab:T,Toast:I,Tooltip:k,initCallback:C,removeDataAPI:D,componentsInit:_,Version:"3.0.15"}}()},65:(t,e,a)=>{var n;t.exports=function(){function t(e,a,n){function i(s,r){if(!a[s]){if(!e[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=a[s]={exports:{}};e[s][0].call(l.exports,(function(t){return i(e[s][1][t]||t)}),l,l.exports,t,e,a,n)}return a[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}return t}()({1:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();t("ie-array-find-polyfill");var i=s(t("morphdom")),o=t("./util");function s(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l="input paste copy click change keydown keyup keypress contextmenu mouseup mousedown mousemove touchstart touchend touchmove compositionstart compositionend focus",d="input change click",u=l.replace(/([a-z]+)/g,"[data-action-$1],")+"[data-action]",h=function(){function t(e){var a=this;c(this,t),this.atemplate=[],this.events=[],e&&Object.keys(e).forEach((function(t){a[t]=e[t]})),this.data||(this.data={}),this.templates||(this.templates=[]);for(var n=0,i=this.templates.length;n<i;n+=1){var s=this.templates[n],r=(0,o.selector)("#"+s).innerHTML;this.atemplate.push({id:s,html:r,binded:!1})}}return n(t,[{key:"addDataBind",value:function(t){var e=this;(0,o.on)(t,"[data-bind]",d,(function(t){var a,n,i=t.delegateTarget,o=i.getAttribute("data-bind"),s=i.getAttribute("href"),r=i.value;s&&(r=r.replace("#","")),"checkbox"===i.getAttribute("type")?(a=[],n=document.querySelectorAll('[data-bind="'+o+'"]'),[].forEach.call(n,(function(t){t.checked&&a.push(t.value)}))):"radio"!==i.getAttribute("type")&&e.updateDataByString(o,r)})),this.events.push({element:t,selector:"[data-bind]",event:d})}},{key:"addActionBind",value:function(t){var e=this;(0,o.on)(t,u,l,(function(t){var a=t.delegateTarget,n=l.split(" "),i="action";n.forEach((function(e){a.getAttribute("data-action-"+e)&&t.type===e&&(i+="-"+e)}));var o=a.getAttribute("data-"+i);if(o){var s,c=o.replace(/\(.*?\);?/,""),d=o.replace(/(.*?)\((.*?)\);?/,"$2").split(",");e.e=t,e.method&&e.method[c]?(s=e.method)[c].apply(s,r(d)):e[c]&&e[c].apply(e,r(d))}})),this.events.push({element:t,selector:u,event:d})}},{key:"removeTemplateEvents",value:function(){this.events.forEach((function(t){(0,o.off)(t.element,t.selector,t.event)}))}},{key:"addTemplate",value:function(t,e){this.atemplate.push({id:t,html:e,binded:!1}),this.templates.push(t)}},{key:"getData",value:function(){return JSON.parse(JSON.stringify(this.data))}},{key:"saveData",value:function(t){var e=JSON.stringify(this.data);localStorage.setItem(t,e)}},{key:"setData",value:function(t){var e=this;Object.keys(t).forEach((function(a){"function"!=typeof t[a]&&(e.data[a]=t[a])}))}},{key:"loadData",value:function(t){var e=JSON.parse(localStorage.getItem(t));e&&this.setData(e)}},{key:"getRand",value:function(t,e){return~~(Math.random()*(e-t+1))+t}},{key:"getRandText",value:function(t){for(var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,i=0;i<t;i+=1)e+=a.charAt(Math.floor(this.getRand(0,n)));return e}},{key:"getDataFromObj",value:function(t,e){for(var a=(t=(t=t.replace(/\[([\w\-\.ぁ-んァ-ヶ亜-熙]+)\]/g,".$1")).replace(/^\./,"")).split(".");a.length;){var n=a.shift();if(!(n in e))return null;e=e[n]}return e}},{key:"getDataByString",value:function(t){var e=this.data;return this.getDataFromObj(t,e)}},{key:"updateDataByString",value:function(t,e){for(var a=this.data,n=t.split(".");n.length>1;)a=a[n.shift()];a[n.shift()]=e}},{key:"removeDataByString",value:function(t){for(var e=this.data,a=t.split(".");a.length>1;)e=e[a.shift()];var n=a.shift();n.match(/^\d+$/)?e.splice(Number(n),1):delete e[n]}},{key:"resolveBlock",value:function(t,e,a){var n=this,i=t.match(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):touch#([\w\-\.ぁ-んァ-ヶ亜-熙]+) -->/g),o=t.match(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):touchnot#([\w\-\.ぁ-んァ-ヶ亜-熙]+) -->/g),s=t.match(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):exist -->/g),r=t.match(/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):empty -->/g);if(i)for(var c=0,l=i.length;c<l;c+=1){var d=i[c],u=(d=d.replace(/([\w\-\.ぁ-んァ-ヶ亜-熙]+):touch#([\w\-\.ぁ-んァ-ヶ亜-熙]+)/,"($1):touch#($2)")).replace(/BEGIN/,"END"),h=new RegExp(d+"(([\\n\\r\\t]|.)*?)"+u,"g");t=t.replace(h,(function(t,a,i,o){return""+("function"==typeof e[a]?e[a].apply(n):n.getDataFromObj(a,e))===i?o:""}))}if(o)for(var f=0,m=o.length;f<m;f+=1){var p=o[f],v=(p=p.replace(/([\w\-\.ぁ-んァ-ヶ亜-熙]+):touchnot#([\w\-\.ぁ-んァ-ヶ亜-熙]+)/,"($1):touchnot#($2)")).replace(/BEGIN/,"END"),g=new RegExp(p+"(([\\n\\r\\t]|.)*?)"+v,"g");t=t.replace(g,(function(t,a,i,o){return""+("function"==typeof e[a]?e[a].apply(n):n.getDataFromObj(a,e))!==i?o:""}))}if(s)for(var y=0,w=s.length;y<w;y+=1){var x=s[y],b=(x=x.replace(/([\w\-\.ぁ-んァ-ヶ亜-熙]+):exist/,"($1):exist")).replace(/BEGIN/,"END"),E=new RegExp(x+"(([\\n\\r\\t]|.)*?)"+b,"g");t=t.replace(E,(function(t,a,i){var o="function"==typeof e[a]?e[a].apply(n):n.getDataFromObj(a,e);return o||0===o?i:""}))}if(r)for(var P=0,L=r.length;P<L;P+=1){var A=r[P],N=(A=A.replace(/([\w\-\.ぁ-んァ-ヶ亜-熙]+):empty/,"($1):empty")).replace(/BEGIN/,"END"),T=new RegExp(A+"(([\\n\\r\\t]|.)*?)"+N,"g");t=t.replace(T,(function(t,a,i){var o="function"==typeof e[a]?e[a].apply(n):n.getDataFromObj(a,e);return o||0===o?"":i}))}return t=t.replace(/{([\w\-\.ぁ-んァ-ヶ亜-熙]+)}(\[([\w\-\.ぁ-んァ-ヶ亜-熙]+)\])*/g,(function(t,i,o,s){var r=void 0;if(""+i=="i")r=a;else{if(!e[i]&&0!==e[i])return s&&n.convert&&n.convert[s]?n.convert[s].call(n,""):"";r="function"==typeof e[i]?e[i].apply(n):e[i]}return s&&n.convert&&n.convert[s]?n.convert[s].call(n,r):r}))}},{key:"resolveAbsBlock",value:function(t){var e=this;return t=t.replace(/{(.*?)}/g,(function(t,a){var n=e.getDataByString(a);return void 0!==n?"function"==typeof n?n.apply(e):n:t}))}},{key:"resolveInclude",value:function(t){var e=/<!-- #include id="(.*?)" -->/g;return t=t.replace(e,(function(t,e){return(0,o.selector)("#"+e).innerHTML}))}},{key:"resolveWith",value:function(t){var e=/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+):with -->(([\n\r\t]|.)*?)<!-- END ([\w\-\.ぁ-んァ-ヶ亜-熙]+):with -->/g;return t=t.replace(e,(function(t,e){return t=t.replace(/data\-bind=['"](.*?)['"]/g,"data-bind='"+e+".$1'")}))}},{key:"resolveLoop",value:function(t){var e=/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+?):loop -->(([\n\r\t]|.)*?)<!-- END ([\w\-\.ぁ-んァ-ヶ亜-熙]+?):loop -->/g,a=this;return t=t.replace(e,(function(t,e,n){var i=a.getDataByString(e),o=[],s="";if((o="function"==typeof i?i.apply(a):i)instanceof Array)for(var r=0,c=o.length;r<c;r+=1)s+=a.resolveBlock(n,o[r],r);return s=s.replace(/\\([^\\])/g,"$1")}))}},{key:"removeData",value:function(t){var e=this.data;return Object.keys(e).forEach((function(a){for(var n=0,i=t.length;n<i;n+=1)a===t[n]&&delete e[a]})),this}},{key:"hasLoop",value:function(t){var e=/<!-- BEGIN ([\w\-\.ぁ-んァ-ヶ亜-熙]+?):loop -->(([\n\r\t]|.)*?)<!-- END ([\w\-\.ぁ-んァ-ヶ亜-熙]+?):loop -->/g;return!!t.match(e)}},{key:"getHtml",value:function(t,e){var a=this.atemplate.find((function(e){return e.id===t})),n="";if(a&&a.html&&(n=a.html),e&&(n=t),!n)return"";var i=this.data;for(n=this.resolveInclude(n),n=this.resolveWith(n);this.hasLoop(n);)n=this.resolveLoop(n);return n=(n=this.resolveBlock(n,i)).replace(/\\([^\\])/g,"$1"),(n=this.resolveAbsBlock(n)).replace(/^([\t ])*\n/gm,"")}},{key:"update",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"html",a=arguments[1],n=this.templates;this.beforeUpdated&&this.beforeUpdated();for(var s=function(s,r){var c=n[s],l="#"+c,d=t.getHtml(c),u=(0,o.selector)("[data-id='"+c+"']");if(u)if("text"===e)u.innerText=d;else if(a){var h=document.createElement("div");h.innerHTML=d;var f=h.querySelector(a).outerHTML;(0,i.default)(u.querySelector(a),f)}else(0,i.default)(u,"<div data-id='"+c+"'>"+d+"</div>");else(0,o.selector)(l).insertAdjacentHTML("afterend",'<div data-id="'+c+'"></div>'),"text"===e?(0,o.selector)("[data-id='"+c+"']").innerText=d:(0,o.selector)("[data-id='"+c+"']").innerHTML=d;var m=t.atemplate.find((function(t){return t.id===c}));m.binded||(m.binded=!0,t.addDataBind((0,o.selector)("[data-id='"+c+"']")),t.addActionBind((0,o.selector)("[data-id='"+c+"']")))},r=0,c=n.length;r<c;r+=1)s(r,c);return this.updateBindingData(a),this.onUpdated&&this.onUpdated(a),this}},{key:"updateBindingData",value:function(t){for(var e=this,a=this.templates,n=0,i=a.length;n<i;n+=1){var s=a[n],r=(0,o.selector)("[data-id='"+s+"']");t&&(r=r.querySelector(t));var c=r.querySelectorAll("[data-bind]");[].forEach.call(c,(function(t){var a=e.getDataByString(t.getAttribute("data-bind"));"checkbox"===t.getAttribute("type")||"radio"===t.getAttribute("type")?a===t.value&&(t.checked=!0):t.value=a}));var l=r.querySelectorAll("[data-bind-oneway]");[].forEach.call(l,(function(t){var a=e.getDataByString(t.getAttribute("data-bind-oneway"));"checkbox"===t.getAttribute("type")||"radio"===t.getAttribute("type")?a===t.value&&(t.checked=!0):t.value=a}))}return this}},{key:"applyMethod",value:function(t){for(var e,a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return(e=this.method)[t].apply(e,n)}},{key:"getComputedProp",value:function(t){return this.data[t].apply(this)}},{key:"remove",value:function(t){for(var e=this.data,a=t.split(".");a.length>1;)e=e[a.shift()];var n=a.shift();return n.match(/^\d+$/)?e.splice(Number(n),1):delete e[n],this}}]),t}();a.default=h,e.exports=a.default},{"./util":2,"ie-array-find-polyfill":5,morphdom:6}],2:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var n=a.matches=function(t,e){for(var a=(t.document||t.ownerDocument).querySelectorAll(e),n=a.length;--n>=0&&a.item(n)!==t;);return n>-1},i=(a.selector=function(t){return document.querySelector(t)},a.findAncestor=function(t,e){if("function"==typeof t.closest)return t.closest(e)||null;for(;t&&t!==document;){if(n(t,e))return t;t=t.parentElement}return null}),o=[];a.on=function(t,e,a,n){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a.split(" ").forEach((function(a){var r=function(t){var a=i(t.target,e);a&&(t.delegateTarget=a,n(t))};o.push({listener:r,element:t,query:e,event:a,capture:s}),t.addEventListener(a,r,s)}))},a.off=function(t,e,a){a.split(" ").forEach((function(a){o.forEach((function(n,i){n.element===t&&n.query===e&&n.event===a&&(t.removeEventListener(a,n.listener,n.capture),o.splice(i,1))}))}))}},{}],3:[function(t,e,a){try{var n=new window.CustomEvent("test");if(n.preventDefault(),!0!==n.defaultPrevented)throw new Error("Could not prevent default")}catch(t){var i=function(t,e){var a,n;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},(a=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n=a.preventDefault,a.preventDefault=function(){n.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},a};i.prototype=window.Event.prototype,window.CustomEvent=i}},{}],4:[function(t,e,i){(function(t,e){!function(t){var a=t.Promise,o=a&&"resolve"in a&&"reject"in a&&"all"in a&&"race"in a&&function(){var t;return new a((function(e){t=e})),"function"==typeof t}();void 0!==i&&i?(i.Promise=o?a:N,i.Polyfill=N):"function"==typeof n&&n.amd?n((function(){return o?a:N})):o||(t.Promise=N);var s="pending",r="sealed",c="fulfilled",l="rejected",d=function(){};function u(t){return"[object Array]"===Object.prototype.toString.call(t)}var h,f=void 0!==e?e:setTimeout,m=[];function p(){for(var t=0;t<m.length;t++)m[t][0](m[t][1]);m=[],h=!1}function v(t,e){m.push([t,e]),h||(h=!0,f(p,0))}function g(t,e){function a(t){x(e,t)}function n(t){E(e,t)}try{t(a,n)}catch(t){n(t)}}function y(t){var e=t.owner,a=e.state_,n=e.data_,i=t[a],o=t.then;if("function"==typeof i){a=c;try{n=i(n)}catch(t){E(o,t)}}w(o,n)||(a===c&&x(o,n),a===l&&E(o,n))}function w(t,e){var a;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var n=e.then;if("function"==typeof n)return n.call(e,(function(n){a||(a=!0,e!==n?x(t,n):b(t,n))}),(function(e){a||(a=!0,E(t,e))})),!0}}catch(e){return a||E(t,e),!0}return!1}function x(t,e){t!==e&&w(t,e)||b(t,e)}function b(t,e){t.state_===s&&(t.state_=r,t.data_=e,v(L,t))}function E(t,e){t.state_===s&&(t.state_=r,t.data_=e,v(A,t))}function P(t){var e=t.then_;t.then_=void 0;for(var a=0;a<e.length;a++)y(e[a])}function L(t){t.state_=c,P(t)}function A(t){t.state_=l,P(t)}function N(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof N==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],g(t,this)}N.prototype={constructor:N,state_:s,then_:null,data_:void 0,then:function(t,e){var a={owner:this,then:new this.constructor(d),fulfilled:t,rejected:e};return this.state_===c||this.state_===l?v(y,a):this.then_.push(a),a.then},catch:function(t){return this.then(null,t)}},N.all=function(t){var e=this;if(!u(t))throw new TypeError("You must pass an array to Promise.all().");return new e((function(e,a){var n=[],i=0;function o(t){return i++,function(a){n[t]=a,--i||e(n)}}for(var s,r=0;r<t.length;r++)(s=t[r])&&"function"==typeof s.then?s.then(o(r),a):n[r]=s;i||e(n)}))},N.race=function(t){var e=this;if(!u(t))throw new TypeError("You must pass an array to Promise.race().");return new e((function(e,a){for(var n,i=0;i<t.length;i++)(n=t[i])&&"function"==typeof n.then?n.then(e,a):e(n)}))},N.resolve=function(t){var e=this;return t&&"object"==typeof t&&t.constructor===e?t:new e((function(e){e(t)}))},N.reject=function(t){return new this((function(e,a){a(t)}))}}("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this)}).call(this,void 0!==a.g?a.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{timers:8}],5:[function(t,e,a){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");var e=Object(this),a=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],i=0;i<a;){var o=e[i];if(t.call(n,o,i,e))return o;i++}}})},{}],6:[function(t,e,a){var n,i=11;function o(t,e){var a,n,o,s,r=e.attributes;if(e.nodeType!==i&&t.nodeType!==i){for(var c=r.length-1;c>=0;c--)n=(a=r[c]).name,o=a.namespaceURI,s=a.value,o?(n=a.localName||n,t.getAttributeNS(o,n)!==s&&("xmlns"===a.prefix&&(n=a.name),t.setAttributeNS(o,n,s))):t.getAttribute(n)!==s&&t.setAttribute(n,s);for(var l=t.attributes,d=l.length-1;d>=0;d--)n=(a=l[d]).name,(o=a.namespaceURI)?(n=a.localName||n,e.hasAttributeNS(o,n)||t.removeAttributeNS(o,n)):e.hasAttribute(n)||t.removeAttribute(n)}}var s="http://www.w3.org/1999/xhtml",r="undefined"==typeof document?void 0:document,c=!!r&&"content"in r.createElement("template"),l=!!r&&r.createRange&&"createContextualFragment"in r.createRange();function d(t){var e=r.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}function u(t){return n||(n=r.createRange()).selectNode(r.body),n.createContextualFragment(t).childNodes[0]}function h(t){var e=r.createElement("body");return e.innerHTML=t,e.childNodes[0]}function f(t){return t=t.trim(),c?d(t):l?u(t):h(t)}function m(t,e){var a=t.nodeName,n=e.nodeName;return a===n||!!(e.actualize&&a.charCodeAt(0)<91&&n.charCodeAt(0)>90)&&a===n.toUpperCase()}function p(t,e){return e&&e!==s?r.createElementNS(e,t):r.createElement(t)}function v(t,e){for(var a=t.firstChild;a;){var n=a.nextSibling;e.appendChild(a),a=n}return e}function g(t,e,a){t[a]!==e[a]&&(t[a]=e[a],t[a]?t.setAttribute(a,""):t.removeAttribute(a))}var y={OPTION:function(t,e){var a=t.parentNode;if(a){var n=a.nodeName.toUpperCase();"OPTGROUP"===n&&(n=(a=a.parentNode)&&a.nodeName.toUpperCase()),"SELECT"!==n||a.hasAttribute("multiple")||(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),a.selectedIndex=-1)}g(t,e,"selected")},INPUT:function(t,e){g(t,e,"checked"),g(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var a=e.value;t.value!==a&&(t.value=a);var n=t.firstChild;if(n){var i=n.nodeValue;if(i==a||!a&&i==t.placeholder)return;n.nodeValue=a}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var a,n,i=-1,o=0,s=t.firstChild;s;)if("OPTGROUP"===(n=s.nodeName&&s.nodeName.toUpperCase()))s=(a=s).firstChild;else{if("OPTION"===n){if(s.hasAttribute("selected")){i=o;break}o++}!(s=s.nextSibling)&&a&&(s=a.nextSibling,a=null)}t.selectedIndex=i}}},w=1,x=11,b=3,E=8;function P(){}function L(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}function A(t){return function(e,a,n){if(n||(n={}),"string"==typeof a)if("#document"===e.nodeName||"HTML"===e.nodeName){var i=a;(a=r.createElement("html")).innerHTML=i}else a=f(a);var o=n.getNodeKey||L,s=n.onBeforeNodeAdded||P,c=n.onNodeAdded||P,l=n.onBeforeElUpdated||P,d=n.onElUpdated||P,u=n.onBeforeNodeDiscarded||P,h=n.onNodeDiscarded||P,g=n.onBeforeElChildrenUpdated||P,A=!0===n.childrenOnly,N=Object.create(null),T=[];function I(t){T.push(t)}function k(t,e){if(t.nodeType===w)for(var a=t.firstChild;a;){var n=void 0;e&&(n=o(a))?I(n):(h(a),a.firstChild&&k(a,e)),a=a.nextSibling}}function _(t,e,a){!1!==u(t)&&(e&&e.removeChild(t),h(t),k(t,a))}function S(t){if(t.nodeType===w||t.nodeType===x)for(var e=t.firstChild;e;){var a=o(e);a&&(N[a]=e),S(e),e=e.nextSibling}}function C(t){c(t);for(var e=t.firstChild;e;){var a=e.nextSibling,n=o(e);if(n){var i=N[n];i&&m(e,i)&&(e.parentNode.replaceChild(i,e),D(i,e))}C(e),e=a}}function B(t,e,a){for(;e;){var n=e.nextSibling;(a=o(e))?I(a):_(e,t,!0),e=n}}function D(e,a,n){var i=o(a);if(i&&delete N[i],!n){if(!1===l(e,a))return;if(t(e,a),d(e),!1===g(e,a))return}"TEXTAREA"!==e.nodeName?O(e,a):y.TEXTAREA(e,a)}function O(t,e){var a,n,i,c,l,d=e.firstChild,u=t.firstChild;t:for(;d;){for(c=d.nextSibling,a=o(d);u;){if(i=u.nextSibling,d.isSameNode&&d.isSameNode(u)){d=c,u=i;continue t}n=o(u);var h=u.nodeType,f=void 0;if(h===d.nodeType&&(h===w?(a?a!==n&&((l=N[a])?i===l?f=!1:(t.insertBefore(l,u),n?I(n):_(u,t,!0),u=l):f=!1):n&&(f=!1),(f=!1!==f&&m(u,d))&&D(u,d)):h!==b&&h!=E||(f=!0,u.nodeValue!==d.nodeValue&&(u.nodeValue=d.nodeValue))),f){d=c,u=i;continue t}n?I(n):_(u,t,!0),u=i}if(a&&(l=N[a])&&m(l,d))t.appendChild(l),D(l,d);else{var p=s(d);!1!==p&&(p&&(d=p),d.actualize&&(d=d.actualize(t.ownerDocument||r)),t.appendChild(d),C(d))}d=c,u=i}B(t,u,n);var v=y[t.nodeName];v&&v(t,e)}S(e);var H=e,M=H.nodeType,X=a.nodeType;if(!A)if(M===w)X===w?m(e,a)||(h(e),H=v(e,p(a.nodeName,a.namespaceURI))):H=a;else if(M===b||M===E){if(X===M)return H.nodeValue!==a.nodeValue&&(H.nodeValue=a.nodeValue),H;H=a}if(H===a)h(e);else{if(a.isSameNode&&a.isSameNode(H))return;if(D(H,a,A),T)for(var G=0,z=T.length;G<z;G++){var U=N[T[G]];U&&_(U,U.parentNode,!1)}}return!A&&H!==e&&e.parentNode&&(H.actualize&&(H=H.actualize(e.ownerDocument||r)),e.parentNode.replaceChild(H,e)),H}}var N=A(o);e.exports=N},{}],7:[function(t,e,a){var n,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function l(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}}();var d,u=[],h=!1,f=-1;function m(){h&&d&&(h=!1,d.length?u=d.concat(u):f=-1,u.length&&p())}function p(){if(!h){var t=c(m);h=!0;for(var e=u.length;e;){for(d=u,u=[];++f<e;)d&&d[f].run();f=-1,e=u.length}d=null,h=!1,l(t)}}function v(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)e[a-1]=arguments[a];u.push(new v(t,e)),1!==u.length||h||c(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],8:[function(t,e,a){(function(e,n){var i=t("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,r={},c=0;function l(t,e){this._id=t,this._clearFn=e}a.setTimeout=function(){return new l(o.call(setTimeout,window,arguments),clearTimeout)},a.setInterval=function(){return new l(o.call(setInterval,window,arguments),clearInterval)},a.clearTimeout=a.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},a.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},a.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},a._unrefActive=a.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},a.setImmediate="function"==typeof e?e:function(t){var e=c++,n=!(arguments.length<2)&&s.call(arguments,1);return r[e]=!0,i((function(){r[e]&&(n?t.apply(null,n):t.call(null),a.clearImmediate(e))})),e},a.clearImmediate="function"==typeof n?n:function(t){delete r[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":7,timers:8}],9:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(t("a-template"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,a){return e&&r(t.prototype,e),a&&r(t,a),t}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}t("custom-event-polyfill");var m='<div class="\\{classNames.smartPhoto\\}"\x3c!-- BEGIN hide:exist --\x3e aria-hidden="true"\x3c!-- END hide:exist --\x3e\x3c!-- BEGIN hide:empty --\x3e aria-hidden="false"\x3c!-- END hide:empty --\x3e role="dialog">\n\t<div class="\\{classNames.smartPhotoBody\\}">\n\t\t<div class="\\{classNames.smartPhotoInner\\}">\n\t\t\t   <div class="\\{classNames.smartPhotoHeader\\}">\n\t\t\t\t\t<span class="\\{classNames.smartPhotoCount\\}">{currentIndex}[increment]/{total}</span>\n\t\t\t\t\t<span class="\\{classNames.smartPhotoCaption\\}" aria-live="polite" tabindex="-1">\x3c!-- BEGIN groupItems:loop --\x3e\x3c!-- \\BEGIN currentIndex:touch#{index} --\x3e{caption}\x3c!-- \\END currentIndex:touch#{index} --\x3e\x3c!-- END groupItems:loop --\x3e</span>\n\t\t\t\t\t<button class="\\{classNames.smartPhotoDismiss\\}" data-action-click="hidePhoto()"><span class="smartphoto-sr-only">\\{message.closeDialog\\}</span></button>\n\t\t\t\t</div>\n\t\t\t\t<div class="\\{classNames.smartPhotoContent\\}"\x3c!-- BEGIN isSmartPhone:exist --\x3e data-action-touchstart="beforeDrag" data-action-touchmove="onDrag" data-action-touchend="afterDrag(false)"\x3c!-- END isSmartPhone:exist --\x3e\x3c!-- BEGIN isSmartPhone:empty --\x3e data-action-click="hidePhoto()"\x3c!-- END isSmartPhone:empty --\x3e>\n\t\t\t\t</div>\n\t\t\t\t<ul style="transform:translate({translateX}[round]px,{translateY}[round]px);" class="\\{classNames.smartPhotoList\\}\x3c!-- BEGIN onMoveClass:exist --\x3e \\{classNames.smartPhotoListOnMove\\}\x3c!-- END onMoveClass:exist --\x3e">\n\t\t\t\t\t\x3c!-- BEGIN groupItems:loop --\x3e\n\t\t\t\t\t<li style="transform:translate({translateX}[round]px,{translateY}[round]px);" class="\x3c!-- \\BEGIN currentIndex:touch#{index} --\x3ecurrent\x3c!-- \\END currentIndex:touch#{index} --\x3e">\n\t\t\t\t\t\t\x3c!-- BEGIN processed:exist --\x3e\n\t\t\t\t\t\t<div style="transform:translate({x}[round]px,{y}[round]px) scale({scale});" class="\\\\{classNames.smartPhotoImgWrap\\\\}"\x3c!-- \\BEGIN isSmartPhone:empty --\x3e data-action-mousemove="onDrag" data-action-mousedown="beforeDrag" data-action-mouseup="afterDrag"\x3c!-- \\END isSmartPhone:empty --\x3e\x3c!-- \\BEGIN isSmartPhone:exist --\x3e data-action-touchstart="beforeDrag" data-action-touchmove="onDrag" data-action-touchend="afterDrag"\x3c!-- \\END isSmartPhone:exist --\x3e>\n\t\t\t\t\t\t\t<img style="\x3c!-- \\BEGIN currentIndex:touch#{index} --\x3etransform:translate(\\{photoPosX\\}[virtualPos]px,\\{photoPosY\\}[virtualPos]px) scale(\\{scaleSize\\});\x3c!-- \\END currentIndex:touch#{index} --\x3ewidth:{width}px;" src="{src}" class="\\\\{classNames.smartPhotoImg\\\\}\x3c!-- \\BEGIN scale:exist --\x3e  \\\\{classNames.smartPhotoImgOnMove\\\\}\x3c!-- \\END scale:exist --\x3e\x3c!-- \\BEGIN elastic:exist --\x3e \\\\{classNames.smartPhotoImgElasticMove\\\\}\x3c!-- \\END elastic:exist --\x3e\x3c!-- \\BEGIN appear:exist --\x3e active\x3c!-- \\END appear:exist --\x3e" ondragstart="return false;">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- END processed:exist --\x3e\n\t\t\t\t\t\t\x3c!-- BEGIN processed:empty --\x3e\n\t\t\t\t\t\t<div class="\\\\{classNames.smartPhotoLoaderWrap\\\\}">\n\t\t\t\t\t\t\t<span class="\\\\{classNames.smartPhotoLoader\\\\}"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- END processed:empty --\x3e\n\t\t\t\t\t</li>\n\t\t\t\t\t\x3c!-- END groupItems:loop --\x3e\n\t\t\t\t</ul>\n\t\t\t\t\x3c!-- BEGIN arrows:exist --\x3e\n\t\t\t\t<ul class="\\{classNames.smartPhotoArrows\\}"\x3c!-- BEGIN hideUi:exist --\x3e aria-hidden="true"\x3c!-- END hideUi:exist --\x3e\x3c!-- BEGIN hideUi:exist --\x3e aria-hidden="false"\x3c!-- END hideUi:exist --\x3e>\n\t\t\t\t\t<li class="\\{classNames.smartPhotoArrowLeft\\}\x3c!-- BEGIN isSmartPhone:exist --\x3e \\{classNames.smartPhotoArrowHideIcon\\}\x3c!-- END isSmartPhone:exist --\x3e"\x3c!-- BEGIN showPrevArrow:empty --\x3e aria-hidden="true"\x3c!-- END showPrevArrow:empty --\x3e><a href="#" data-action-click="gotoSlide({prev})" role="button"><span class="smartphoto-sr-only">\\{message.gotoPrevImage\\}</span></a></li>\n\t\t\t\t\t<li class="\\{classNames.smartPhotoArrowRight\\}\x3c!-- BEGIN isSmartPhone:exist --\x3e \\{classNames.smartPhotoArrowHideIcon\\}\x3c!-- END isSmartPhone:exist --\x3e"\x3c!-- BEGIN showNextArrow:empty --\x3e aria-hidden="true"\x3c!-- END showNextArrow:empty --\x3e><a href="#" data-action-click="gotoSlide({next})" role="button"><span class="smartphoto-sr-only">\\{message.gotoNextImage\\}</span></a></li>\n\t\t\t\t</ul>\n\t\t\t\t\x3c!-- END arrows:exist --\x3e\n\t\t\t\t\x3c!-- BEGIN nav:exist --\x3e\n\t\t\t\t<nav class="\\{classNames.smartPhotoNav\\}"\x3c!-- BEGIN hideUi:exist --\x3e aria-hidden="true"\x3c!-- END hideUi:exist --\x3e\x3c!-- BEGIN hideUi:exist --\x3e aria-hidden="false"\x3c!-- END hideUi:exist --\x3e>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t\x3c!-- BEGIN groupItems:loop --\x3e\n\t\t\t\t\t\t<li><a href="#" data-action-click="gotoSlide({index})" class="\x3c!-- \\BEGIN currentIndex:touch#{index} --\x3ecurrent\x3c!-- \\END currentIndex:touch#{index} --\x3e" style="background-image:url({thumb});" role="button"><span class="smartphoto-sr-only">go to {caption}</span></a></li>\n\t\t\t\t\t\t\x3c!-- END groupItems:loop --\x3e\n\t\t\t\t\t</ul>\n\t\t\t\t</nav>\n\t\t\t\t\x3c!-- END nav:exist --\x3e\n\t\t</div>\n\t\t\x3c!-- BEGIN appearEffect:exist --\x3e\n\t\t<img src=\\{appearEffect.img\\}\n\t\tclass="\\{classNames.smartPhotoImgClone\\}"\n\t\tstyle="width:\\{appearEffect.width\\}px;height:\\{appearEffect.height\\}px;transform:translate(\\{appearEffect.left\\}px,\\{appearEffect.top\\}px) scale(1)" />\n\t\t\x3c!-- END appearEffect:exist --\x3e\n\t</div>\n</div>\n',p=t("../lib/util"),v=t("es6-promise-polyfill").Promise,g={classNames:{smartPhoto:"smartphoto",smartPhotoClose:"smartphoto-close",smartPhotoBody:"smartphoto-body",smartPhotoInner:"smartphoto-inner",smartPhotoContent:"smartphoto-content",smartPhotoImg:"smartphoto-img",smartPhotoImgOnMove:"smartphoto-img-onmove",smartPhotoImgElasticMove:"smartphoto-img-elasticmove",smartPhotoImgWrap:"smartphoto-img-wrap",smartPhotoArrows:"smartphoto-arrows",smartPhotoNav:"smartphoto-nav",smartPhotoArrowRight:"smartphoto-arrow-right",smartPhotoArrowLeft:"smartphoto-arrow-left",smartPhotoArrowHideIcon:"smartphoto-arrow-hide",smartPhotoImgLeft:"smartphoto-img-left",smartPhotoImgRight:"smartphoto-img-right",smartPhotoList:"smartphoto-list",smartPhotoListOnMove:"smartphoto-list-onmove",smartPhotoHeader:"smartphoto-header",smartPhotoCount:"smartphoto-count",smartPhotoCaption:"smartphoto-caption",smartPhotoDismiss:"smartphoto-dismiss",smartPhotoLoader:"smartphoto-loader",smartPhotoLoaderWrap:"smartphoto-loader-wrap",smartPhotoImgClone:"smartphoto-img-clone"},message:{gotoNextImage:"go to the next image",gotoPrevImage:"go to the previous image",closeDialog:"close the image dialog"},arrows:!0,nav:!0,showAnimation:!0,verticalGravity:!1,useOrientationApi:!1,useHistoryApi:!0,swipeTopToClose:!1,swipeBottomToClose:!0,swipeOffset:100,headerHeight:60,footerHeight:60,forceInterval:10,registance:.5,loadOffset:2,resizeStyle:"fit",lazyAttribute:"data-src"},y=function(t){function e(t,a){var n;s(this,e),(n=l(this,u(e).call(this))).data=p.extend({},g,a),n.data.currentIndex=0,n.data.oldIndex=0,n.data.hide=!0,n.data.group={},n.data.scaleSize=1,n.data.scale=!1,n.pos={x:0,y:0},n.data.photoPosX=0,n.data.photoPosY=0,n.handlers=[],n.convert={increment:n.increment,virtualPos:n.virtualPos,round:n.round},n.data.groupItems=n.groupItems,n.elements="string"==typeof t?document.querySelectorAll(t):t;var i=new Date;n.tapSecond=i.getTime(),n.onListMove=!1,n.clicked=!1,n.id=n._getUniqId(),n.vx=0,n.vy=0,n.data.appearEffect=null,n.addTemplate(n.id,m),n.data.isSmartPhone=n._isSmartPhone();var o=document.querySelector("body");p.append(o,"<div data-id='".concat(n.id,"'></div>")),[].forEach.call(n.elements,(function(t){n.addNewItem(t)})),n.update();var r=n._getCurrentItemByHash();if(r&&p.triggerEvent(r.element,"click"),n.interval=setInterval((function(){n._doAnim()}),n.data.forceInterval),!n.data.isSmartPhone){var c=function(){n.groupItems()&&(n._resetTranslate(),n._setPosByCurrentIndex(),n._setSizeByScreen(),n.update())},d=function(t){var e=t.keyCode||t.which;!0!==n.data.hide&&(37===e?n.gotoSlide(n.data.prev):39===e?n.gotoSlide(n.data.next):27===e&&n.hidePhoto())};return window.addEventListener("resize",c),window.addEventListener("keydown",d),n._registerRemoveEvent(window,"resize",c),n._registerRemoveEvent(window,"keydown",d),l(n)}var h=function(){if(n.groupItems()){n._resetTranslate(),n._setPosByCurrentIndex(),n._setHashByCurrentIndex(),n._setSizeByScreen(),n.update();var t=n._getWindowWidth(),e=500;!function a(i){new v((function(t){setTimeout((function(){t()}),25)})).then((function(){t!==n._getWindowWidth()?(n._resetTranslate(),n._setPosByCurrentIndex(),n._setHashByCurrentIndex(),n._setSizeByScreen(),n.update()):i<=e&&a(i+25)}))}(0)}};if(window.addEventListener("orientationchange",h),n._registerRemoveEvent(window,"orientationchange",h),!n.data.useOrientationApi)return l(n);var f=function(t){var e=window.orientation;t&&t.gamma&&!n.data.appearEffect&&(n.isBeingZoomed||n.photoSwipable||n.data.elastic||!n.data.scale||(0===e?n._calcGravity(t.gamma,t.beta):90===e?n._calcGravity(t.beta,t.gamma):-90===e?n._calcGravity(-t.beta,-t.gamma):180===e&&n._calcGravity(-t.gamma,-t.beta)))};return window.addEventListener("deviceorientation",f),n._registerRemoveEvent(window,"deviceorientation",f),n}return h(e,t),c(e,[{key:"on",value:function(t,e){var a=this._getElementByClass(this.data.classNames.smartPhoto),n=function(t){e.call(a,t)};a.addEventListener(t,n),this._registerRemoveEvent(a,t,n)}},{key:"_registerRemoveEvent",value:function(t,e,a){this.handlers.push({target:t,event:e,handler:a})}},{key:"destroy",value:function(){this.handlers.forEach((function(t){t.target.removeEventListener(t.event,t.handler)}));var t=document.querySelector('[data-id="'.concat(this.id,'"]'));p.removeElement(t),clearInterval(this.interval),this.removeTemplateEvents()}},{key:"increment",value:function(t){return t+1}},{key:"round",value:function(t){return Math.round(t)}},{key:"virtualPos",value:function(t){return(t=parseInt(t,10))/this._getSelectedItem().scale/this.data.scaleSize}},{key:"groupItems",value:function(){return this.data.group[this.data.currentGroup]}},{key:"_resetTranslate",value:function(){var t=this;this.groupItems().forEach((function(e,a){e.translateX=t._getWindowWidth()*a}))}},{key:"addNewItem",value:function(t){var e=this,a=t.getAttribute("data-group")||"nogroup",n=this.data.group;"nogroup"===a&&t.setAttribute("data-group","nogroup"),n[a]||(n[a]=[]);var i=n[a].length,o=document.querySelector("body"),s=t.getAttribute("href"),r=t.querySelector("img"),c=s;r&&(c=r.getAttribute(this.data.lazyAttribute)?r.getAttribute(this.data.lazyAttribute):r.currentSrc?r.currentSrc:r.src);var l={src:s,thumb:c,caption:t.getAttribute("data-caption"),groupId:a,translateX:this._getWindowWidth()*i,index:i,translateY:0,width:50,height:50,id:t.getAttribute("data-id")||i,loaded:!1,processed:!1,element:t};n[a].push(l),this.data.currentGroup=a,t.getAttribute("data-id")||t.setAttribute("data-id",i),t.setAttribute("data-index",i);var d=function(a){a.preventDefault(),e.data.currentGroup=t.getAttribute("data-group"),e.data.currentIndex=parseInt(t.getAttribute("data-index"),10),e._setHashByCurrentIndex();var n=e._getSelectedItem();n.loaded?(e._initPhoto(),e.addAppearEffect(t,n),e.clicked=!0,e.update(),o.style.overflow="hidden",e._fireEvent("open")):e._loadItem(n).then((function(){e._initPhoto(),e.addAppearEffect(t,n),e.clicked=!0,e.update(),o.style.overflow="hidden",e._fireEvent("open")}))};t.addEventListener("click",d),this._registerRemoveEvent(t,"click",d)}},{key:"_initPhoto",value:function(){this.data.total=this.groupItems().length,this.data.hide=!1,this.data.photoPosX=0,this.data.photoPosY=0,this._setPosByCurrentIndex(),this._setSizeByScreen(),this.setArrow(),"fill"===this.data.resizeStyle&&this.data.isSmartPhone&&(this.data.scale=!0,this.data.hideUi=!0,this.data.scaleSize=this._getScaleBoarder())}},{key:"onUpdated",value:function(){var t=this;if(this.data.appearEffect&&this.data.appearEffect.once&&(this.data.appearEffect.once=!1,this.execEffect().then((function(){t.data.appearEffect=null,t.data.appear=!0,t.update()}))),this.clicked){this.clicked=!1;var e=this.data.classNames;this._getElementByClass(e.smartPhotoCaption).focus()}}},{key:"execEffect",value:function(){var t=this;return new v((function(e){p.isOldIE()&&e();var a=t.data,n=a.appearEffect,i=a.classNames,o=t._getElementByClass(i.smartPhotoImgClone),s=function t(){o.removeEventListener("transitionend",t,!0),e()};o.addEventListener("transitionend",s,!0),setTimeout((function(){o.style.transform="translate(".concat(n.afterX,"px, ").concat(n.afterY,"px) scale(").concat(n.scale,")")}),10)}))}},{key:"addAppearEffect",value:function(t,e){if(!1!==this.data.showAnimation){var a=t.querySelector("img"),n=p.getViewPos(a),i={},o=1;i.width=a.offsetWidth,i.height=a.offsetHeight,i.top=n.top,i.left=n.left,i.once=!0,a.getAttribute(this.data.lazyAttribute)?i.img=a.getAttribute(this.data.lazyAttribute):i.img=e.src;var s=this._getWindowWidth(),r=this._getWindowHeight(),c=r-this.data.headerHeight-this.data.footerHeight;"fill"===this.data.resizeStyle&&this.data.isSmartPhone?o=a.offsetWidth>a.offsetHeight?r/a.offsetHeight:s/a.offsetWidth:(i.width>=i.height?o=e.height<c?e.width/i.width:c/i.height:i.height>i.width&&(o=e.height<c?e.height/i.height:c/i.height),i.width*o>s&&(o=s/i.width));var l=(o-1)/2*a.offsetWidth+(s-a.offsetWidth*o)/2,d=(o-1)/2*a.offsetHeight+(r-a.offsetHeight*o)/2;i.afterX=l,i.afterY=d,i.scale=o,this.data.appearEffect=i}else this.data.appear=!0}},{key:"hidePhoto",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom";this.data.hide=!0,this.data.appear=!1,this.data.appearEffect=null,this.data.hideUi=!1,this.data.scale=!1,this.data.scaleSize=1;var a=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,n=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,i=document.querySelector("body");window.location.hash&&this._setHash(""),window.scroll(a,n),this._doHideEffect(e).then((function(){t.update(),i.style.overflow="",t._fireEvent("close")}))}},{key:"_doHideEffect",value:function(t){var e=this;return new v((function(a){p.isOldIE()&&a();var n=e.data.classNames,i=e._getElementByClass(n.smartPhoto),o=e._getElementByQuery(".current .".concat(n.smartPhotoImg)),s=e._getWindowHeight(),r=function t(){i.removeEventListener("transitionend",t,!0),a()};i.style.opacity=0,"bottom"===t?o.style.transform="translateY(".concat(s,"px)"):"top"===t&&(o.style.transform="translateY(-".concat(s,"px)")),i.addEventListener("transitionend",r,!0)}))}},{key:"_getElementByClass",value:function(t){return document.querySelector('[data-id="'.concat(this.id,'"] .').concat(t))}},{key:"_getElementByQuery",value:function(t){return document.querySelector('[data-id="'.concat(this.id,'"] ').concat(t))}},{key:"_getTouchPos",value:function(){var t=0,e=0,a="undefined"==typeof event?this.e:event;return this._isTouched(a)?(t=a.touches[0].pageX,e=a.touches[0].pageY):a.pageX&&(t=a.pageX,e=a.pageY),{x:t,y:e}}},{key:"_getGesturePos",value:function(t){var e=t.touches;return[{x:e[0].pageX,y:e[0].pageY},{x:e[1].pageX,y:e[1].pageY}]}},{key:"_setPosByCurrentIndex",value:function(){var t=this,e=-1*this.groupItems()[this.data.currentIndex].translateX;this.pos.x=e,setTimeout((function(){t.data.translateX=e,t.data.translateY=0,t._listUpdate()}),1)}},{key:"_setHashByCurrentIndex",value:function(){var t=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,a=this.groupItems()[this.data.currentIndex].id,n=this.data.currentGroup,i="group=".concat(n,"&photo=").concat(a);this._setHash(i),window.scroll(t,e)}},{key:"_setHash",value:function(t){window.history&&window.history.pushState&&this.data.useHistoryApi&&(t?window.history.replaceState(null,null,"".concat(location.pathname).concat(location.search,"#").concat(t)):window.history.replaceState(null,null,"".concat(location.pathname).concat(location.search)))}},{key:"_getCurrentItemByHash",value:function(){var t=this.data.group,e=location.hash.substr(1),a=p.parseQuery(e),n=null,i=function(t){a.group===t.groupId&&a.photo===t.id&&(n=t)};return Object.keys(t).forEach((function(e){t[e].forEach(i)})),n}},{key:"_loadItem",value:function(t){return new v((function(e){var a=new Image;a.onload=function(){t.width=a.width,t.height=a.height,t.loaded=!0,e()},a.onerror=function(){e()},a.src=t.src}))}},{key:"_getItemByIndex",value:function(t){var e=this.data;return e.group[e.currentGroup][t]?e.group[e.currentGroup][t]:null}},{key:"_loadNeighborItems",value:function(){for(var t=this,e=this.data.currentIndex,a=this.data.loadOffset,n=e+a,i=[],o=e-a;o<n;o++){var s=this._getItemByIndex(o);s&&!s.loaded&&i.push(this._loadItem(s))}i.length&&v.all(i).then((function(){t._initPhoto(),t.update()}))}},{key:"_setSizeByScreen",value:function(){var t=this._getWindowWidth(),e=this._getWindowHeight(),a=this.data.headerHeight,n=this.data.footerHeight,i=e-(a+n);this.groupItems().forEach((function(a){a.loaded&&(a.processed=!0,a.scale=i/a.height,a.height<i&&(a.scale=1),a.x=(a.scale-1)/2*a.width+(t-a.width*a.scale)/2,a.y=(a.scale-1)/2*a.height+(e-a.height*a.scale)/2,a.width*a.scale>t&&(a.scale=t/a.width,a.x=(a.scale-1)/2*a.width))}))}},{key:"_slideList",value:function(){var t=this;this.data.scaleSize=1,this.isBeingZoomed=!1,this.data.hideUi=!1,this.data.scale=!1,this.data.photoPosX=0,this.data.photoPosY=0,this.data.onMoveClass=!0,this._setPosByCurrentIndex(),this._setHashByCurrentIndex(),this._setSizeByScreen(),setTimeout((function(){var e=t._getSelectedItem();t.data.onMoveClass=!1,t.setArrow(),t.update(),t.data.oldIndex!==t.data.currentIndex&&t._fireEvent("change"),t.data.oldIndex=t.data.currentIndex,t._loadNeighborItems(),e.loaded||t._loadItem(e).then((function(){t._initPhoto(),t.update()}))}),200)}},{key:"gotoSlide",value:function(t){this.e&&this.e.preventDefault&&this.e.preventDefault(),this.data.currentIndex=parseInt(t,10),this.data.currentIndex||(this.data.currentIndex=0),this._slideList()}},{key:"setArrow",value:function(){var t=this.groupItems().length,e=this.data.currentIndex+1,a=this.data.currentIndex-1;this.data.showNextArrow=!1,this.data.showPrevArrow=!1,e!==t&&(this.data.next=e,this.data.showNextArrow=!0),-1!==a&&(this.data.prev=a,this.data.showPrevArrow=!0)}},{key:"beforeDrag",value:function(){if(this._isGestured(this.e))this.beforeGesture();else if(this.isBeingZoomed=!1,this.data.scale)this.beforePhotoDrag();else{var t=this._getTouchPos();this.isSwipable=!0,this.dragStart=!0,this.firstPos=t,this.oldPos=t}}},{key:"afterDrag",value:function(){var t=this.groupItems(),e=(new Date).getTime(),a=this.tapSecond-e,n=0,i=0;if(this.isSwipable=!1,this.onListMove=!1,this.oldPos&&(n=this.oldPos.x-this.firstPos.x,i=this.oldPos.y-this.firstPos.y),this.isBeingZoomed)this.afterGesture();else if(this.data.scale)this.afterPhotoDrag();else if(p.isSmartPhone()||0!==n||0!==i){if(Math.abs(a)<=500&&0===n&&0===i)return this.e.preventDefault(),void this.zoomPhoto();this.tapSecond=e,this._fireEvent("swipeend"),"horizontal"===this.moveDir&&(n>=this.data.swipeOffset&&0!==this.data.currentIndex?this.data.currentIndex-=1:n<=-this.data.swipeOffset&&this.data.currentIndex!==t.length-1&&(this.data.currentIndex+=1),this._slideList()),"vertical"===this.moveDir&&(this.data.swipeBottomToClose&&i>=this.data.swipeOffset?this.hidePhoto("bottom"):this.data.swipeTopToClose&&i<=-this.data.swipeOffset?this.hidePhoto("top"):(this.data.translateY=0,this._slideList()))}else this.zoomPhoto()}},{key:"onDrag",value:function(){if(this.e.preventDefault(),this._isGestured(this.e)&&!1===this.onListMove)this.onGesture();else if(!this.isBeingZoomed)if(this.data.scale)this.onPhotoDrag();else if(this.isSwipable){var t=this._getTouchPos(),e=t.x-this.oldPos.x,a=t.y-this.firstPos.y;this.dragStart&&(this._fireEvent("swipestart"),this.dragStart=!1,Math.abs(e)>Math.abs(a)?this.moveDir="horizontal":this.moveDir="vertical"),"horizontal"===this.moveDir?(this.pos.x+=e,this.data.translateX=this.pos.x):this.data.translateY=a,this.onListMove=!0,this.oldPos=t,this._listUpdate()}}},{key:"zoomPhoto",value:function(){var t=this;this.data.hideUi=!0,this.data.scaleSize=this._getScaleBoarder(),this.data.scaleSize<=1||(this.data.photoPosX=0,this.data.photoPosY=0,this._photoUpdate(),setTimeout((function(){t.data.scale=!0,t._photoUpdate(),t._fireEvent("zoomin")}),300))}},{key:"zoomOutPhoto",value:function(){this.data.scaleSize=1,this.isBeingZoomed=!1,this.data.hideUi=!1,this.data.scale=!1,this.data.photoPosX=0,this.data.photoPosY=0,this._photoUpdate(),this._fireEvent("zoomout")}},{key:"beforePhotoDrag",value:function(){var t=this._getTouchPos();this.photoSwipable=!0,this.data.photoPosX||(this.data.photoPosX=0),this.data.photoPosY||(this.data.photoPosY=0),this.oldPhotoPos=t,this.firstPhotoPos=t}},{key:"onPhotoDrag",value:function(){if(this.photoSwipable){this.e.preventDefault();var t=this._getTouchPos(),e=t.x-this.oldPhotoPos.x,a=t.y-this.oldPhotoPos.y,n=this._round(this.data.scaleSize*e,6),i=this._round(this.data.scaleSize*a,6);"number"==typeof n&&(this.data.photoPosX+=n,this.photoVX=n),"number"==typeof i&&(this.data.photoPosY+=i,this.photoVY=i),this.oldPhotoPos=t,this._photoUpdate()}}},{key:"afterPhotoDrag",value:function(){if(this.oldPhotoPos.x===this.firstPhotoPos.x&&this.photoSwipable)this.photoSwipable=!1,this.zoomOutPhoto();else{this.photoSwipable=!1;var t=this._getSelectedItem(),e=this._makeBound(t),a=this.data.swipeOffset*this.data.scaleSize,n=0,i=0;if(this.data.photoPosX>e.maxX?n=-1:this.data.photoPosX<e.minX&&(n=1),this.data.photoPosY>e.maxY?i=-1:this.data.photoPosY<e.minY&&(i=1),this.data.photoPosX-e.maxX>a&&0!==this.data.currentIndex)return void this.gotoSlide(this.data.prev);if(e.minX-this.data.photoPosX>a&&this.data.currentIndex+1!==this.data.total)return void this.gotoSlide(this.data.next);0===n&&0===i?(this.vx=this.photoVX/5,this.vy=this.photoVY/5):this._registerElasticForce(n,i)}}},{key:"beforeGesture",value:function(){this._fireEvent("gesturestart");var t=this._getGesturePos(this.e),e=this._getDistance(t[0],t[1]);this.isBeingZoomed=!0,this.oldDistance=e,this.data.scale=!0,this.e.preventDefault()}},{key:"onGesture",value:function(){var t=this._getGesturePos(this.e),e=this._getDistance(t[0],t[1]),a=(e-this.oldDistance)/100,n=this.data.scaleSize,i=this.data.photoPosX,o=this.data.photoPosY;this.isBeingZoomed=!0,this.data.scaleSize+=this._round(a,6),this.data.scaleSize<.2&&(this.data.scaleSize=.2),this.data.scaleSize<n&&(this.data.photoPosX=(1+this.data.scaleSize-n)*i,this.data.photoPosY=(1+this.data.scaleSize-n)*o),this.data.scaleSize<1||this.data.scaleSize>this._getScaleBoarder()?this.data.hideUi=!0:this.data.hideUi=!1,this.oldDistance=e,this.e.preventDefault(),this._photoUpdate()}},{key:"afterGesture",value:function(){this.data.scaleSize>this._getScaleBoarder()||(this.data.photoPosX=0,this.data.photoPosY=0,this.data.scale=!1,this.data.scaleSize=1,this.data.hideUi=!1,this._fireEvent("gestureend"),this._photoUpdate())}},{key:"_getForceAndTheta",value:function(t,e){return{force:Math.sqrt(t*t+e*e),theta:Math.atan2(e,t)}}},{key:"_getScaleBoarder",value:function(){var t=this._getSelectedItem(),e=this._getWindowWidth(),a=this._getWindowHeight();return p.isSmartPhone()?t.width>t.height?a/(t.height*t.scale):e/(t.width*t.scale):1/t.scale}},{key:"_makeBound",value:function(t){var e,a,n,i,o=t.width*t.scale*this.data.scaleSize,s=t.height*t.scale*this.data.scaleSize,r=this._getWindowWidth(),c=this._getWindowHeight();return e=r>o?-1*(n=(r-o)/2):-1*(n=(o-r)/2),a=c>s?-1*(i=(c-s)/2):-1*(i=(s-c)/2),{minX:this._round(e,6)*this.data.scaleSize,minY:this._round(a,6)*this.data.scaleSize,maxX:this._round(n,6)*this.data.scaleSize,maxY:this._round(i,6)*this.data.scaleSize}}},{key:"_registerElasticForce",value:function(t,e){var a=this,n=this._getSelectedItem(),i=this._makeBound(n);this.data.elastic=!0,1===t?this.data.photoPosX=i.minX:-1===t&&(this.data.photoPosX=i.maxX),1===e?this.data.photoPosY=i.minY:-1===e&&(this.data.photoPosY=i.maxY),this._photoUpdate(),setTimeout((function(){a.data.elastic=!1,a._photoUpdate()}),300)}},{key:"_getSelectedItem",value:function(){var t=this.data,e=t.currentIndex;return t.group[t.currentGroup][e]}},{key:"_getUniqId",value:function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()}},{key:"_getDistance",value:function(t,e){var a=t.x-e.x,n=t.y-e.y;return Math.sqrt(a*a+n*n)}},{key:"_round",value:function(t,e){var a=Math.pow(10,e);return t*=a,t=Math.round(t),t/=a}},{key:"_isTouched",value:function(t){return!(!t||!t.touches)}},{key:"_isGestured",value:function(t){return!!(t&&t.touches&&t.touches.length>1)}},{key:"_isSmartPhone",value:function(){var t=navigator.userAgent;return t.indexOf("iPhone")>0||t.indexOf("iPad")>0||t.indexOf("ipod")>0||t.indexOf("Android")>0}},{key:"_calcGravity",value:function(t,e){(t>5||t<-5)&&(this.vx+=.05*t),!1!==this.data.verticalGravity&&(e>5||e<-5)&&(this.vy+=.05*e)}},{key:"_photoUpdate",value:function(){var t=this.data.classNames,e=this._getElementByQuery(".current").querySelector(".".concat(t.smartPhotoImg)),a=this._getElementByQuery(".".concat(t.smartPhotoNav)),n=this._getElementByQuery(".".concat(t.smartPhotoArrows)),i=this.virtualPos(this.data.photoPosX),o=this.virtualPos(this.data.photoPosY),s=this.data.scaleSize,r="translate(".concat(i,"px,").concat(o,"px) scale(").concat(s,")");e.style.transform=r,this.data.scale?p.addClass(e,t.smartPhotoImgOnMove):p.removeClass(e,t.smartPhotoImgOnMove),this.data.elastic?p.addClass(e,t.smartPhotoImgElasticMove):p.removeClass(e,t.smartPhotoImgElasticMove),this.data.hideUi?(a&&a.setAttribute("aria-hidden","true"),n&&n.setAttribute("aria-hidden","true")):(a&&a.setAttribute("aria-hidden","false"),n&&n.setAttribute("aria-hidden","false"))}},{key:"_getWindowWidth",value:function(){return document&&document.documentElement?document.documentElement.clientWidth:window&&window.innerWidth?window.innerWidth:0}},{key:"_getWindowHeight",value:function(){return document&&document.documentElement?document.documentElement.clientHeight:window&&window.innerHeight?window.innerHeight:0}},{key:"_listUpdate",value:function(){var t=this.data.classNames,e=this._getElementByQuery(".".concat(t.smartPhotoList)),a="translate(".concat(this.data.translateX,"px,").concat(this.data.translateY,"px)");e.style.transform=a,this.data.onMoveClass?p.addClass(e,t.smartPhotoListOnMove):p.removeClass(e,t.smartPhotoListOnMove)}},{key:"_fireEvent",value:function(t){var e=this._getElementByClass(this.data.classNames.smartPhoto);p.triggerEvent(e,t)}},{key:"_doAnim",value:function(){if(!(this.isBeingZoomed||this.isSwipable||this.photoSwipable||this.data.elastic)&&this.data.scale){this.data.photoPosX+=this.vx,this.data.photoPosY+=this.vy;var t=this._getSelectedItem(),e=this._makeBound(t);this.data.photoPosX<e.minX?(this.data.photoPosX=e.minX,this.vx*=-.2):this.data.photoPosX>e.maxX&&(this.data.photoPosX=e.maxX,this.vx*=-.2),this.data.photoPosY<e.minY?(this.data.photoPosY=e.minY,this.vy*=-.2):this.data.photoPosY>e.maxY&&(this.data.photoPosY=e.maxY,this.vy*=-.2);var a=this._getForceAndTheta(this.vx,this.vy),n=a.force,i=a.theta;n-=this.data.registance,Math.abs(n)<.5||(this.vx=Math.cos(i)*n,this.vy=Math.sin(i)*n,this._photoUpdate())}}}]),e}(n.default);a.default=y,e.exports=a.default},{"../lib/util":11,"a-template":1,"custom-event-polyfill":3,"es6-promise-polyfill":4}],10:[function(t,e,a){e.exports=t("./core/")},{"./core/":9}],11:[function(t,e,a){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(a,"__esModule",{value:!0}),a.isOldIE=a.getBrowser=a.removeClass=a.addClass=a.append=a.removeElement=a.getViewPos=a.parseQuery=a.triggerEvent=a.extend=a.isSmartPhone=void 0;var i=function(){var t=navigator.userAgent;return t.indexOf("iPhone")>0||t.indexOf("iPad")>0||t.indexOf("ipod")>0||t.indexOf("Android")>0};function o(t){t=t||{};for(var e=1;e<arguments.length;e++){var a=arguments[e];if(a)for(var i in a)a.hasOwnProperty(i)&&("object"===n(a[i])?t[i]=o(t[i],a[i]):t[i]=a[i])}return t}a.isSmartPhone=i;var s=o;a.extend=s;var r=function(t,e,a){var n;window.CustomEvent?n=new CustomEvent(e,{cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!1,a),t.dispatchEvent(n)};a.triggerEvent=r;var c=function(t){for(var e,a,n,i=t.split("&"),o={},s=0,r=i.length;s<r;s++)void 0!==(e=i[s].split("="))[0]&&(a=e[0],n=void 0!==e[1]?e.slice(1).join("="):a,o[a]=decodeURIComponent(n));return o};a.parseQuery=c;var l=function(t){return{left:t.getBoundingClientRect().left,top:t.getBoundingClientRect().top}};a.getViewPos=l;var d=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)};a.removeElement=d;var u=function(t,e){var a=document.createElement("div");for(a.innerHTML=e;a.children.length>0;)t.appendChild(a.children[0])};a.append=u;var h=function(t,e){t.classList?t.classList.add(e):t.className+=" ".concat(e)};a.addClass=h;var f=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")};a.removeClass=f;var m=function(){var t=window.navigator.userAgent.toLowerCase(),e=window.navigator.appVersion.toLowerCase(),a="unknown";return-1!=t.indexOf("msie")?a=-1!=e.indexOf("msie 6.")?"ie6":-1!=e.indexOf("msie 7.")?"ie7":-1!=e.indexOf("msie 8.")?"ie8":-1!=e.indexOf("msie 9.")?"ie9":-1!=e.indexOf("msie 10.")?"ie10":"ie":-1!=t.indexOf("trident/7")?a="ie11":-1!=t.indexOf("chrome")?a="chrome":-1!=t.indexOf("safari")?a="safari":-1!=t.indexOf("opera")?a="opera":-1!=t.indexOf("firefox")&&(a="firefox"),a};a.getBrowser=m;var p=function(){var t=m();return-1!==t.indexOf("ie")&&parseInt(t.replace(/[^0-9]/g,""))<=10};a.isOldIE=p},{}]},{},[10])(10)}},e={};function a(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,a),o.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{a(919);const t=a(65);window.addEventListener("DOMContentLoaded",(function(){new t(".js-smartPhoto")}))})();