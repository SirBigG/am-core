{% extends "base.html" %}

{% load static staticfiles i18n %}
{% load render_bundle from webpack_loader %}
{% load cache %}

{% block title %}
    {{ object.title }}
{% endblock title %}

{% block extra_meta %}
    {% load post_extras %}
    <meta content="{{ object.title }} | AgroMega.in.ua" property="og:title">
    <meta content="{% if object.meta_description %}
                        {{ object.meta_description }}
                   {% else %}
                        {{ object.text|truncatechars:300|striptags }}
                   {% endif %}" property="og:description">
    <meta content="{% full_url object.photo.first.image.url %}" property="og:image">
    <meta content="{% full_url object.get_absolute_url %}" property="og:url">
    <meta content="AgroMega.in.ua" property="og:site_name">
    <link href="{% full_url object.photo.first.image.url %}" rel="image_src" />
{% endblock extra_meta %}

{% block second_menu %}
    {% include 'posts/second_menu.html' %}
{% endblock second_menu %}

{% block content %}
    {% cache 500 post %}
        <div class="col-xs-12 col-md-8">
            <h1>{{ object.title }}</h1>
            <div class="col-xs-12 col-md-8">
                <div id="post-carousel" class="carousel" data-ride="carousel" data-interval="false">

                    <div class="carousel-inner" role="listbox">
                        {% for photo in object.photo.all%}
                            {% if photo == object.photo.first %}
                                <div class="item active">
                            {% else %}
                                <div class="item">
                            {% endif %}
                                <img alt="{{ photo.description }}" src="{{ photo.image.url }}" class="img-rounded" />
                                <div class="carousel-caption">
                                    {% if photo.description %}<h3>{{ photo.description }}</h3>{% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                      <!-- Controls -->
                     <a class="left carousel-control" href="#post-carousel" role="button" data-slide="prev">
                            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                     </a>
                     <a class="right carousel-control" href="#post-carousel" role="button" data-slide="next">
                            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                     </a>
                </div>
            </div>
            <div class="text-justify">
                {{ object.text|safe }}
            </div>
            <h5>{% if object.author %}{{ object.author }}{% endif %}</h5>
            <h5>{% if object.source %}{% trans 'Source: ' %}{{ object.source }}{% endif %}</h5>
            <h4 class="text-center">{% trans 'Share with friends: ' %}
                <a tabindex="-1" target="Share-in-vk"
                   onclick="window.open(this.href, 'Share-in-vk' , 'width=400, height=200'); return false;"
                   href="http://vk.com/share.php?url={% full_url object.get_absolute_url %}">
                    <i class="fa fa-vk fa-2x"></i>
                </a>
                <a tabindex="-1" target="Share-in-facebook"
                   onclick="window.open(this.href, 'Share-in-facebook' , 'width=400, height=400'); return false;"
                   href="https://www.facebook.com/sharer/sharer.php?u={% full_url object.get_absolute_url %}">
                    <i class="fa fa-facebook fa-2x"></i>
                </a>
            </h4>
            <!-- Random posts block. -->
            <div class="h5">{% trans 'Більше статтей тут:' %}</div>
                <div id="random-post-list"></div>
        </div>
    {% endcache %}
    {% render_bundle 'detail' %}
{% endblock content %}
